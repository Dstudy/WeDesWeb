import"./overlay-menu-BiuOw_Vj.js";import{g as r,S as x}from"./ScrollTrigger-7Zz_kl0b.js";r.registerPlugin(x);const y=100,v=document.querySelector(".top-card");let f=null,d=0;window.layoutTL=null;function T(){const t=window.layoutTL||window.tl||f,e=t&&t.scrollTrigger;if(!e){console.log("No scroll");return}const n=e.scroller||window,i=Math.max(0,e.end-1);n===window||n===document.body||n===document.documentElement?window.scrollTo({top:i,behavior:"smooth"}):n.scrollTo({top:i,behavior:"smooth"})}function E(){const t=document.querySelectorAll(".team-card"),e=document.querySelector(".team-card-container"),n=e.offsetWidth-80,i=e.offsetHeight-80,l={x:800,y:200},s=[{x:.1,y:.025},{x:.4,y:.025},{x:.7,y:.025},{x:.25,y:.4},{x:.55,y:.4},{x:.85,y:.4},{x:.1,y:.75},{x:.4,y:.75},{x:.7,y:.75}];t.forEach(o=>{r.set(o,{x:l.x,y:l.y,rotation:0})}),f=r.timeline({scrollTrigger:{trigger:".team-card-container",start:"top top",end:"max",scrub:2,pin:!0,markers:!0,onUpdate(o){!d&&o.progress>=.8?d=1:d=0}}}),t.forEach((o,u)=>{const a=s[u]||s[s.length-1],c=a.x*n,p=a.y*i;f.to(o,{x:c,y:p,rotation:0,duration:1,ease:"power2.out"},0)})}const L=160;function S(t){if(document.querySelectorAll(".team-card.expanded").forEach(e=>{e!==t&&h(e)}),t==v&&!d){T(),d=1;return}t.classList.contains("expanded")?h(t):W(t)}function W(t){const e=document.querySelector(".overlay"),n=t.querySelector(".quote-content"),i=t.offsetWidth;t.style.width=i+"px",t.offsetWidth,t.classList.add("expanded"),n.classList.add("show"),e.classList.add("show");const l=i+Math.max(280,n.scrollWidth+40),s=Math.max(460,l);t.style.width=s+"px";const o=window.innerWidth,u=t.getBoundingClientRect(),a=u.left+s+y-o;let c=0;u.left<=y||a>0&&(c=-a);const p=parseFloat(r.getProperty(t,"x"))||0;t.dataset.prevX=String(p),c&&r.to(t,{x:p+c,duration:.35,ease:"power2.out"}),setTimeout(()=>{try{t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}catch{}},50);const m=g=>{g.propertyName==="width"&&(t.style.width="auto",t.removeEventListener("transitionend",m))};t.addEventListener("transitionend",m)}function h(t){const e=document.querySelector(".overlay"),n=t.querySelector(".quote-content"),i=t.offsetWidth;t.style.width=i+"px",t.offsetWidth,n.classList.remove("show"),t.classList.remove("expanded"),t.style.width=L+"px";const l=parseFloat(t.dataset.prevX||"0");r.to(t,{x:l,duration:.3,ease:"power2.inOut"});const s=o=>{o.propertyName==="width"&&(t.style.width="",t.removeEventListener("transitionend",s),document.querySelector(".team-card.expanded")||e.classList.remove("show"))};t.addEventListener("transitionend",s)}function w(){document.querySelectorAll(".team-card.expanded").forEach(h)}function q(){const t=document.querySelector(".loop-track");if(!t)return;const e="Thành viên WeDes",i=Math.max(8,Math.ceil(window.innerWidth*2/300));t.innerHTML="";for(let s=0;s<i*2;s++){const o=document.createElement("span");o.className="loop-item",o.textContent=e,t.appendChild(o)}t._loopTl&&(t._loopTl.kill(),t._loopTl=null);const l=t.scrollWidth/2;r.set(t,{x:0}),t._loopTl=r.fromTo(t,{x:0},{x:-l,duration:70,ease:"none",repeat:-1,onRepeat:()=>r.set(t,{x:0})})}window.addEventListener("load",()=>{x.getAll().forEach(t=>t.kill()),setTimeout(E,100),q()});document.addEventListener("keydown",t=>{t.key==="Escape"&&w()});window.toggleCard=S;window.closeAllCards=w;
