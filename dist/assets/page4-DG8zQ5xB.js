var Pe=Object.defineProperty;var Me=(O,A,T)=>A in O?Pe(O,A,{enumerable:!0,configurable:!0,writable:!0,value:T}):O[A]=T;var J=(O,A,T)=>Me(O,typeof A!="symbol"?A+"":A,T);import"./overlay-menu-BiuOw_Vj.js";import{g as ne,S as se}from"./ScrollTrigger-7Zz_kl0b.js";function ge(O,A,T){return Math.max(O,Math.min(A,T))}class Te{advance(A){var a;if(!this.isRunning)return;let T=!1;if(this.lerp)this.value=(I=this.value,v=this.to,e=60*this.lerp,l=A,function(r,h,i){return(1-i)*r+i*h}(I,v,1-Math.exp(-e*l))),Math.round(this.value)===this.to&&(this.value=this.to,T=!0);else{this.currentTime+=A;const r=ge(0,this.currentTime/this.duration,1);T=r>=1;const h=T?1:this.easing(r);this.value=this.from+(this.to-this.from)*h}var I,v,e,l;(a=this.onUpdate)==null||a.call(this,this.value,T),T&&this.stop()}stop(){this.isRunning=!1}fromTo(A,T,{lerp:I=.1,duration:v=1,easing:e=r=>r,onStart:l,onUpdate:a}){this.from=this.value=A,this.to=T,this.lerp=I,this.duration=v,this.easing=e,this.currentTime=0,this.isRunning=!0,l==null||l(),this.onUpdate=a}}class Ae{constructor({wrapper:A,content:T,autoResize:I=!0,debounce:v=250}={}){J(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});J(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});J(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=A,this.content=T,I&&(this.debouncedResize=function(e,l){let a;return function(){let r=arguments,h=this;clearTimeout(a),a=setTimeout(function(){e.apply(h,r)},l)}}(this.resize,v),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var A,T;(A=this.wrapperResizeObserver)==null||A.disconnect(),(T=this.contentResizeObserver)==null||T.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class de{constructor(){this.events={}}emit(A,...T){let I=this.events[A]||[];for(let v=0,e=I.length;v<e;v++)I[v](...T)}on(A,T){var I;return(I=this.events[A])!=null&&I.push(T)||(this.events[A]=[T]),()=>{var v;this.events[A]=(v=this.events[A])==null?void 0:v.filter(e=>T!==e)}}off(A,T){var I;this.events[A]=(I=this.events[A])==null?void 0:I.filter(v=>T!==v)}destroy(){this.events={}}}const pe=100/6;class Be{constructor(A,{wheelMultiplier:T=1,touchMultiplier:I=1}){J(this,"onTouchStart",A=>{const{clientX:T,clientY:I}=A.targetTouches?A.targetTouches[0]:A;this.touchStart.x=T,this.touchStart.y=I,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:A})});J(this,"onTouchMove",A=>{const{clientX:T,clientY:I}=A.targetTouches?A.targetTouches[0]:A,v=-(T-this.touchStart.x)*this.touchMultiplier,e=-(I-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=T,this.touchStart.y=I,this.lastDelta={x:v,y:e},this.emitter.emit("scroll",{deltaX:v,deltaY:e,event:A})});J(this,"onTouchEnd",A=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:A})});J(this,"onWheel",A=>{let{deltaX:T,deltaY:I,deltaMode:v}=A;T*=v===1?pe:v===2?this.windowWidth:1,I*=v===1?pe:v===2?this.windowHeight:1,T*=this.wheelMultiplier,I*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:T,deltaY:I,event:A})});J(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=A,this.wheelMultiplier=T,this.touchMultiplier=I,this.touchStart={x:null,y:null},this.emitter=new de,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(A,T){return this.emitter.on(A,T)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Ee{constructor({wrapper:A=window,content:T=document.documentElement,wheelEventsTarget:I=A,eventsTarget:v=I,smoothWheel:e=!0,syncTouch:l=!1,syncTouchLerp:a=.075,touchInertiaMultiplier:r=35,duration:h,easing:i=w=>Math.min(1,1.001-Math.pow(2,-10*w)),lerp:u=!h&&.1,infinite:o=!1,orientation:t="vertical",gestureOrientation:s="vertical",touchMultiplier:n=1,wheelMultiplier:c=1,autoResize:d=!0,__experimental__naiveDimensions:y=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:w,deltaY:M,event:f})=>{if(f.ctrlKey)return;const p=f.type.includes("touch"),m=f.type.includes("wheel");if(this.options.syncTouch&&p&&f.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const g=w===0&&M===0,S=this.options.gestureOrientation==="vertical"&&M===0||this.options.gestureOrientation==="horizontal"&&w===0;if(g||S)return;let x=f.composedPath();if(x=x.slice(0,x.indexOf(this.rootElement)),x.find(E=>{var L,D,R,k,F;return((L=E.hasAttribute)===null||L===void 0?void 0:L.call(E,"data-lenis-prevent"))||p&&((D=E.hasAttribute)===null||D===void 0?void 0:D.call(E,"data-lenis-prevent-touch"))||m&&((R=E.hasAttribute)===null||R===void 0?void 0:R.call(E,"data-lenis-prevent-wheel"))||((k=E.classList)===null||k===void 0?void 0:k.contains("lenis"))&&!(!((F=E.classList)===null||F===void 0)&&F.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void f.preventDefault();if(this.isSmooth=this.options.syncTouch&&p||this.options.smoothWheel&&m,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();f.preventDefault();let C=M;this.options.gestureOrientation==="both"?C=Math.abs(M)>Math.abs(w)?M:w:this.options.gestureOrientation==="horizontal"&&(C=w);const P=p&&this.options.syncTouch,B=p&&f.type==="touchend"&&Math.abs(C)>5;B&&(C=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+C,Object.assign({programmatic:!1},P?{lerp:B?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const w=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-w),this.emit()}},window.lenisVersion="1.0.42",A!==document.documentElement&&A!==document.body||(A=window),this.options={wrapper:A,content:T,wheelEventsTarget:I,eventsTarget:v,smoothWheel:e,syncTouch:l,syncTouchLerp:a,touchInertiaMultiplier:r,duration:h,easing:i,lerp:u,infinite:o,gestureOrientation:s,orientation:t,touchMultiplier:n,wheelMultiplier:c,autoResize:d,__experimental__naiveDimensions:y},this.animate=new Te,this.emitter=new de,this.dimensions=new Ae({wrapper:A,content:T,autoResize:d}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=l||e,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new Be(v,{touchMultiplier:n,wheelMultiplier:c}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(A,T){return this.emitter.on(A,T)}off(A,T){return this.emitter.off(A,T)}setScroll(A){this.isHorizontal?this.rootElement.scrollLeft=A:this.rootElement.scrollTop=A}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(A){const T=A-(this.time||A);this.time=A,this.animate.advance(.001*T)}scrollTo(A,{offset:T=0,immediate:I=!1,lock:v=!1,duration:e=this.options.duration,easing:l=this.options.easing,lerp:a=!e&&this.options.lerp,onComplete:r,force:h=!1,programmatic:i=!0}={}){if(!this.isStopped&&!this.isLocked||h){if(["top","left","start"].includes(A))A=0;else if(["bottom","right","end"].includes(A))A=this.limit;else{let u;if(typeof A=="string"?u=document.querySelector(A):A!=null&&A.nodeType&&(u=A),u){if(this.options.wrapper!==window){const t=this.options.wrapper.getBoundingClientRect();T-=this.isHorizontal?t.left:t.top}const o=u.getBoundingClientRect();A=(this.isHorizontal?o.left:o.top)+this.animatedScroll}}if(typeof A=="number"){if(A+=T,A=Math.round(A),this.options.infinite?i&&(this.targetScroll=this.animatedScroll=this.scroll):A=ge(0,A,this.limit),I)return this.animatedScroll=this.targetScroll=A,this.setScroll(this.scroll),this.reset(),void(r==null||r(this));if(!i){if(A===this.targetScroll)return;this.targetScroll=A}this.animate.fromTo(this.animatedScroll,A,{duration:e,easing:l,lerp:a,onStart:()=>{v&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(u,o)=>{this.isScrolling=!0,this.velocity=u-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=u,this.setScroll(this.scroll),i&&(this.targetScroll=u),o||this.emit(),o&&(this.reset(),this.emit(),r==null||r(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(A=this.animatedScroll,T=this.limit,(A%T+T)%T):this.animatedScroll;var A,T}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(A){this.__isSmooth!==A&&(this.__isSmooth=A,this.toggleClassName("lenis-smooth",A))}get isScrolling(){return this.__isScrolling}set isScrolling(A){this.__isScrolling!==A&&(this.__isScrolling=A,this.toggleClassName("lenis-scrolling",A))}get isStopped(){return this.__isStopped}set isStopped(A){this.__isStopped!==A&&(this.__isStopped=A,this.toggleClassName("lenis-stopped",A))}get isLocked(){return this.__isLocked}set isLocked(A){this.__isLocked!==A&&(this.__isLocked=A,this.toggleClassName("lenis-locked",A))}get className(){let A="lenis";return this.isStopped&&(A+=" lenis-stopped"),this.isLocked&&(A+=" lenis-locked"),this.isScrolling&&(A+=" lenis-scrolling"),this.isSmooth&&(A+=" lenis-smooth"),A}toggleClassName(A,T){this.rootElement.classList.toggle(A,T),this.emitter.emit("className change",this)}}var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(O,A){(function(I,v){O.exports=v()})(re,function(){return function(T){var I={};function v(e){if(I[e])return I[e].exports;var l=I[e]={i:e,l:!1,exports:{}};return T[e].call(l.exports,l,l.exports,v),l.l=!0,l.exports}return v.m=T,v.c=I,v.d=function(e,l,a){v.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:a})},v.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v.t=function(e,l){if(l&1&&(e=v(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var r in e)v.d(a,r,(function(h){return e[h]}).bind(null,r));return a},v.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return v.d(l,"a",l),l},v.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},v.p="",v(v.s=20)}([function(T,I){var v={};T.exports=v,function(){v._baseDelta=1e3/60,v._nextId=0,v._seed=0,v._nowStartTime=+new Date,v._warnedOnce={},v._decomp=null,v.extend=function(l,a){var r,h;typeof a=="boolean"?(r=2,h=a):(r=1,h=!0);for(var i=r;i<arguments.length;i++){var u=arguments[i];if(u)for(var o in u)h&&u[o]&&u[o].constructor===Object&&(!l[o]||l[o].constructor===Object)?(l[o]=l[o]||{},v.extend(l[o],h,u[o])):l[o]=u[o]}return l},v.clone=function(l,a){return v.extend({},a,l)},v.keys=function(l){if(Object.keys)return Object.keys(l);var a=[];for(var r in l)a.push(r);return a},v.values=function(l){var a=[];if(Object.keys){for(var r=Object.keys(l),h=0;h<r.length;h++)a.push(l[r[h]]);return a}for(var i in l)a.push(l[i]);return a},v.get=function(l,a,r,h){a=a.split(".").slice(r,h);for(var i=0;i<a.length;i+=1)l=l[a[i]];return l},v.set=function(l,a,r,h,i){var u=a.split(".").slice(h,i);return v.get(l,a,0,-1)[u[u.length-1]]=r,r},v.shuffle=function(l){for(var a=l.length-1;a>0;a--){var r=Math.floor(v.random()*(a+1)),h=l[a];l[a]=l[r],l[r]=h}return l},v.choose=function(l){return l[Math.floor(v.random()*l.length)]},v.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},v.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},v.isFunction=function(l){return typeof l=="function"},v.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},v.isString=function(l){return toString.call(l)==="[object String]"},v.clamp=function(l,a,r){return l<a?a:l>r?r:l},v.sign=function(l){return l<0?-1:1},v.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-v._nowStartTime},v.random=function(l,a){return l=typeof l<"u"?l:0,a=typeof a<"u"?a:1,l+e()*(a-l)};var e=function(){return v._seed=(v._seed*9301+49297)%233280,v._seed/233280};v.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},v.logLevel=1,v.log=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.info=function(){console&&v.logLevel>0&&v.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warn=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");v._warnedOnce[l]||(v.warn(l),v._warnedOnce[l]=!0)},v.deprecated=function(l,a,r){l[a]=v.chain(function(){v.warnOnce("🔅 deprecated 🔅",r)},l[a])},v.nextId=function(){return v._nextId++},v.indexOf=function(l,a){if(l.indexOf)return l.indexOf(a);for(var r=0;r<l.length;r++)if(l[r]===a)return r;return-1},v.map=function(l,a){if(l.map)return l.map(a);for(var r=[],h=0;h<l.length;h+=1)r.push(a(l[h]));return r},v.topologicalSort=function(l){var a=[],r=[],h=[];for(var i in l)!r[i]&&!h[i]&&v._topologicalSort(i,r,h,l,a);return a},v._topologicalSort=function(l,a,r,h,i){var u=h[l]||[];r[l]=!0;for(var o=0;o<u.length;o+=1){var t=u[o];r[t]||a[t]||v._topologicalSort(t,a,r,h,i)}r[l]=!1,a[l]=!0,i.push(l)},v.chain=function(){for(var l=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?l.push.apply(l,r._chained):l.push(r)}var h=function(){for(var i,u=new Array(arguments.length),o=0,t=arguments.length;o<t;o++)u[o]=arguments[o];for(o=0;o<l.length;o+=1){var s=l[o].apply(i,u);typeof s<"u"&&(i=s)}return i};return h._chained=l,h},v.chainPathBefore=function(l,a,r){return v.set(l,a,v.chain(r,v.get(l,a)))},v.chainPathAfter=function(l,a,r){return v.set(l,a,v.chain(v.get(l,a),r))},v.setDecomp=function(l){v._decomp=l},v.getDecomp=function(){var l=v._decomp;try{!l&&typeof window<"u"&&(l=window.decomp),!l&&typeof re<"u"&&(l=re.decomp)}catch{l=null}return l}}()},function(T,I){var v={};T.exports=v,function(){v.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&v.update(l,e),l},v.update=function(e,l,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<l.length;r++){var h=l[r];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},v.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},v.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},v.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},v.shift=function(e,l){var a=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+a,e.min.y=l.y,e.max.y=l.y+r}}()},function(T,I){var v={};T.exports=v,function(){v.create=function(e,l){return{x:e||0,y:l||0}},v.clone=function(e){return{x:e.x,y:e.y}},v.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},v.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},v.rotate=function(e,l,a){var r=Math.cos(l),h=Math.sin(l);a||(a={});var i=e.x*r-e.y*h;return a.y=e.x*h+e.y*r,a.x=i,a},v.rotateAbout=function(e,l,a,r){var h=Math.cos(l),i=Math.sin(l);r||(r={});var u=a.x+((e.x-a.x)*h-(e.y-a.y)*i);return r.y=a.y+((e.x-a.x)*i+(e.y-a.y)*h),r.x=u,r},v.normalise=function(e){var l=v.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},v.dot=function(e,l){return e.x*l.x+e.y*l.y},v.cross=function(e,l){return e.x*l.y-e.y*l.x},v.cross3=function(e,l,a){return(l.x-e.x)*(a.y-e.y)-(l.y-e.y)*(a.x-e.x)},v.add=function(e,l,a){return a||(a={}),a.x=e.x+l.x,a.y=e.y+l.y,a},v.sub=function(e,l,a){return a||(a={}),a.x=e.x-l.x,a.y=e.y-l.y,a},v.mult=function(e,l){return{x:e.x*l,y:e.y*l}},v.div=function(e,l){return{x:e.x/l,y:e.y/l}},v.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},v.neg=function(e){return{x:-e.x,y:-e.y}},v.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},v._temp=[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()]}()},function(T,I,v){var e={};T.exports=e;var l=v(2),a=v(0);(function(){e.create=function(r,h){for(var i=[],u=0;u<r.length;u++){var o=r[u],t={x:o.x,y:o.y,index:u,body:h,isInternal:!1};i.push(t)}return i},e.fromPath=function(r,h){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return r.replace(i,function(o,t,s){u.push({x:parseFloat(t),y:parseFloat(s)})}),e.create(u,h)},e.centre=function(r){for(var h=e.area(r,!0),i={x:0,y:0},u,o,t,s=0;s<r.length;s++)t=(s+1)%r.length,u=l.cross(r[s],r[t]),o=l.mult(l.add(r[s],r[t]),u),i=l.add(i,o);return l.div(i,6*h)},e.mean=function(r){for(var h={x:0,y:0},i=0;i<r.length;i++)h.x+=r[i].x,h.y+=r[i].y;return l.div(h,r.length)},e.area=function(r,h){for(var i=0,u=r.length-1,o=0;o<r.length;o++)i+=(r[u].x-r[o].x)*(r[u].y+r[o].y),u=o;return h?i/2:Math.abs(i)/2},e.inertia=function(r,h){for(var i=0,u=0,o=r,t,s,n=0;n<o.length;n++)s=(n+1)%o.length,t=Math.abs(l.cross(o[s],o[n])),i+=t*(l.dot(o[s],o[s])+l.dot(o[s],o[n])+l.dot(o[n],o[n])),u+=t;return h/6*(i/u)},e.translate=function(r,h,i){i=typeof i<"u"?i:1;var u=r.length,o=h.x*i,t=h.y*i,s;for(s=0;s<u;s++)r[s].x+=o,r[s].y+=t;return r},e.rotate=function(r,h,i){if(h!==0){var u=Math.cos(h),o=Math.sin(h),t=i.x,s=i.y,n=r.length,c,d,y,w;for(w=0;w<n;w++)c=r[w],d=c.x-t,y=c.y-s,c.x=t+(d*u-y*o),c.y=s+(d*o+y*u);return r}},e.contains=function(r,h){for(var i=h.x,u=h.y,o=r.length,t=r[o-1],s,n=0;n<o;n++){if(s=r[n],(i-t.x)*(s.y-t.y)+(u-t.y)*(t.x-s.x)>0)return!1;t=s}return!0},e.scale=function(r,h,i,u){if(h===1&&i===1)return r;u=u||e.centre(r);for(var o,t,s=0;s<r.length;s++)o=r[s],t=l.sub(o,u),r[s].x=u.x+t.x*h,r[s].y=u.y+t.y*i;return r},e.chamfer=function(r,h,i,u,o){typeof h=="number"?h=[h]:h=h||[8],i=typeof i<"u"?i:-1,u=u||2,o=o||14;for(var t=[],s=0;s<r.length;s++){var n=r[s-1>=0?s-1:r.length-1],c=r[s],d=r[(s+1)%r.length],y=h[s<h.length?s:h.length-1];if(y===0){t.push(c);continue}var w=l.normalise({x:c.y-n.y,y:n.x-c.x}),M=l.normalise({x:d.y-c.y,y:c.x-d.x}),f=Math.sqrt(2*Math.pow(y,2)),p=l.mult(a.clone(w),y),m=l.normalise(l.mult(l.add(w,M),.5)),g=l.sub(c,l.mult(m,f)),S=i;i===-1&&(S=Math.pow(y,.32)*1.75),S=a.clamp(S,u,o),S%2===1&&(S+=1);for(var x=Math.acos(l.dot(w,M)),C=x/S,P=0;P<S;P++)t.push(l.add(l.rotate(p,C*P),g))}return t},e.clockwiseSort=function(r){var h=e.mean(r);return r.sort(function(i,u){return l.angle(h,i)-l.angle(h,u)}),r},e.isConvex=function(r){var h=0,i=r.length,u,o,t,s;if(i<3)return null;for(u=0;u<i;u++)if(o=(u+1)%i,t=(u+2)%i,s=(r[o].x-r[u].x)*(r[t].y-r[o].y),s-=(r[o].y-r[u].y)*(r[t].x-r[o].x),s<0?h|=1:s>0&&(h|=2),h===3)return!1;return h!==0?!0:null},e.hull=function(r){var h=[],i=[],u,o;for(r=r.slice(0),r.sort(function(t,s){var n=t.x-s.x;return n!==0?n:t.y-s.y}),o=0;o<r.length;o+=1){for(u=r[o];i.length>=2&&l.cross3(i[i.length-2],i[i.length-1],u)<=0;)i.pop();i.push(u)}for(o=r.length-1;o>=0;o-=1){for(u=r[o];h.length>=2&&l.cross3(h[h.length-2],h[h.length-1],u)<=0;)h.pop();h.push(u)}return h.pop(),i.pop(),h.concat(i)}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(2),r=v(7),h=v(0),i=v(1),u=v(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var s={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},n=h.extend(s,t);return o(n,t),n},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(t,s){s=s||{},e.set(t,{bounds:t.bounds||i.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),i.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:s.axes||t.axes,area:s.area||t.area,mass:s.mass||t.mass,inertia:s.inertia||t.inertia});var n=t.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),c=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||c,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,s,n){var c;typeof s=="string"&&(c=s,s={},s[c]=n);for(c in s)if(Object.prototype.hasOwnProperty.call(s,c))switch(n=s[c],c){case"isStatic":e.setStatic(t,n);break;case"isSleeping":r.set(t,n);break;case"mass":e.setMass(t,n);break;case"density":e.setDensity(t,n);break;case"inertia":e.setInertia(t,n);break;case"vertices":e.setVertices(t,n);break;case"position":e.setPosition(t,n);break;case"angle":e.setAngle(t,n);break;case"velocity":e.setVelocity(t,n);break;case"angularVelocity":e.setAngularVelocity(t,n);break;case"speed":e.setSpeed(t,n);break;case"angularSpeed":e.setAngularSpeed(t,n);break;case"parts":e.setParts(t,n);break;case"centre":e.setCentre(t,n);break;default:t[c]=n}},e.setStatic=function(t,s){for(var n=0;n<t.parts.length;n++){var c=t.parts[n];s?(c.isStatic||(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia}),c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null),c.isStatic=s}},e.setMass=function(t,s){var n=t.inertia/(t.mass/6);t.inertia=n*(s/6),t.inverseInertia=1/t.inertia,t.mass=s,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,s){e.setMass(t,s*t.area),t.density=s},e.setInertia=function(t,s){t.inertia=s,t.inverseInertia=1/t.inertia},e.setVertices=function(t,s){s[0].body===t?t.vertices=s:t.vertices=l.create(s,t),t.axes=u.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var n=l.centre(t.vertices);l.translate(t.vertices,n,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),i.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,s,n){var c;for(s=s.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,c=0;c<s.length;c++){var d=s[c];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(n=typeof n<"u"?n:!0,n){var y=[];for(c=0;c<s.length;c++)y=y.concat(s[c].vertices);l.clockwiseSort(y);var w=l.hull(y),M=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,M)}var f=e._totalProperties(t);t.area=f.area,t.parent=t,t.position.x=f.centre.x,t.position.y=f.centre.y,t.positionPrev.x=f.centre.x,t.positionPrev.y=f.centre.y,e.setMass(t,f.mass),e.setInertia(t,f.inertia),e.setPosition(t,f.centre)}},e.setCentre=function(t,s,n){n?(t.positionPrev.x+=s.x,t.positionPrev.y+=s.y,t.position.x+=s.x,t.position.y+=s.y):(t.positionPrev.x=s.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=s.y-(t.position.y-t.positionPrev.y),t.position.x=s.x,t.position.y=s.y)},e.setPosition=function(t,s,n){var c=a.sub(s,t.position);n?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=c.x,t.velocity.y=c.y,t.speed=a.magnitude(c)):(t.positionPrev.x+=c.x,t.positionPrev.y+=c.y);for(var d=0;d<t.parts.length;d++){var y=t.parts[d];y.position.x+=c.x,y.position.y+=c.y,l.translate(y.vertices,c),i.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,s,n){var c=s-t.angle;n?(t.anglePrev=t.angle,t.angularVelocity=c,t.angularSpeed=Math.abs(c)):t.anglePrev+=c;for(var d=0;d<t.parts.length;d++){var y=t.parts[d];y.angle+=c,l.rotate(y.vertices,c,t.position),u.rotate(y.axes,c),i.update(y.bounds,y.vertices,t.velocity),d>0&&a.rotateAbout(y.position,c,t.position,y.position)}},e.setVelocity=function(t,s){var n=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-s.x*n,t.positionPrev.y=t.position.y-s.y*n,t.velocity.x=(t.position.x-t.positionPrev.x)/n,t.velocity.y=(t.position.y-t.positionPrev.y)/n,t.speed=a.magnitude(t.velocity)},e.getVelocity=function(t){var s=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*s,y:(t.position.y-t.positionPrev.y)*s}},e.getSpeed=function(t){return a.magnitude(e.getVelocity(t))},e.setSpeed=function(t,s){e.setVelocity(t,a.mult(a.normalise(e.getVelocity(t)),s))},e.setAngularVelocity=function(t,s){var n=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-s*n,t.angularVelocity=(t.angle-t.anglePrev)/n,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,s){e.setAngularVelocity(t,h.sign(e.getAngularVelocity(t))*s)},e.translate=function(t,s,n){e.setPosition(t,a.add(t.position,s),n)},e.rotate=function(t,s,n,c){if(!n)e.setAngle(t,t.angle+s,c);else{var d=Math.cos(s),y=Math.sin(s),w=t.position.x-n.x,M=t.position.y-n.y;e.setPosition(t,{x:n.x+(w*d-M*y),y:n.y+(w*y+M*d)},c),e.setAngle(t,t.angle+s,c)}},e.scale=function(t,s,n,c){var d=0,y=0;c=c||t.position;for(var w=0;w<t.parts.length;w++){var M=t.parts[w];l.scale(M.vertices,s,n,c),M.axes=u.fromVertices(M.vertices),M.area=l.area(M.vertices),e.setMass(M,t.density*M.area),l.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),e.setInertia(M,e._inertiaScale*l.inertia(M.vertices,M.mass)),l.translate(M.vertices,{x:M.position.x,y:M.position.y}),w>0&&(d+=M.area,y+=M.inertia),M.position.x=c.x+(M.position.x-c.x)*s,M.position.y=c.y+(M.position.y-c.y)*n,i.update(M.bounds,M.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,y))),t.circleRadius&&(s===n?t.circleRadius*=s:t.circleRadius=null)},e.update=function(t,s){s=(typeof s<"u"?s:1e3/60)*t.timeScale;var n=s*s,c=e._timeCorrection?s/(t.deltaTime||s):1,d=1-t.frictionAir*(s/h._baseDelta),y=(t.position.x-t.positionPrev.x)*c,w=(t.position.y-t.positionPrev.y)*c;t.velocity.x=y*d+t.force.x/t.mass*n,t.velocity.y=w*d+t.force.y/t.mass*n,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=s,t.angularVelocity=(t.angle-t.anglePrev)*d*c+t.torque/t.inertia*n,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var M=0;M<t.parts.length;M++){var f=t.parts[M];l.translate(f.vertices,t.velocity),M>0&&(f.position.x+=t.velocity.x,f.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(f.vertices,t.angularVelocity,t.position),u.rotate(f.axes,t.angularVelocity),M>0&&a.rotateAbout(f.position,t.angularVelocity,t.position,f.position)),i.update(f.bounds,f.vertices,t.velocity)}},e.updateVelocities=function(t){var s=e._baseDelta/t.deltaTime,n=t.velocity;n.x=(t.position.x-t.positionPrev.x)*s,n.y=(t.position.y-t.positionPrev.y)*s,t.speed=Math.sqrt(n.x*n.x+n.y*n.y),t.angularVelocity=(t.angle-t.anglePrev)*s,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,s,n){var c={x:s.x-t.position.x,y:s.y-t.position.y};t.force.x+=n.x,t.force.y+=n.y,t.torque+=c.x*n.y-c.y*n.x},e._totalProperties=function(t){for(var s={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=t.parts.length===1?0:1;n<t.parts.length;n++){var c=t.parts[n],d=c.mass!==1/0?c.mass:1;s.mass+=d,s.area+=c.area,s.inertia+=c.inertia,s.centre=a.add(s.centre,a.mult(c.position,d))}return s.centre=a.div(s.centre,s.mass),s}})()},function(T,I,v){var e={};T.exports=e;var l=v(0);(function(){e.on=function(a,r,h){for(var i=r.split(" "),u,o=0;o<i.length;o++)u=i[o],a.events=a.events||{},a.events[u]=a.events[u]||[],a.events[u].push(h);return h},e.off=function(a,r,h){if(!r){a.events={};return}typeof r=="function"&&(h=r,r=l.keys(a.events).join(" "));for(var i=r.split(" "),u=0;u<i.length;u++){var o=a.events[i[u]],t=[];if(h&&o)for(var s=0;s<o.length;s++)o[s]!==h&&t.push(o[s]);a.events[i[u]]=t}},e.trigger=function(a,r,h){var i,u,o,t,s=a.events;if(s&&l.keys(s).length>0){h||(h={}),i=r.split(" ");for(var n=0;n<i.length;n++)if(u=i[n],o=s[u],o){t=l.clone(h,!1),t.name=u,t.source=a;for(var c=0;c<o.length;c++)o[c].apply(a,[t])}}}})()},function(T,I,v){var e={};T.exports=e;var l=v(5),a=v(0),r=v(1),h=v(4);(function(){e.create=function(i){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},e.setModified=function(i,u,o,t){if(i.isModified=u,u&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),o&&i.parent&&e.setModified(i.parent,u,o,t),t)for(var s=0;s<i.composites.length;s++){var n=i.composites[s];e.setModified(n,u,o,t)}},e.add=function(i,u){var o=[].concat(u);l.trigger(i,"beforeAdd",{object:u});for(var t=0;t<o.length;t++){var s=o[t];switch(s.type){case"body":if(s.parent!==s){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,s);break;case"constraint":e.addConstraint(i,s);break;case"composite":e.addComposite(i,s);break;case"mouseConstraint":e.addConstraint(i,s.constraint);break}}return l.trigger(i,"afterAdd",{object:u}),i},e.remove=function(i,u,o){var t=[].concat(u);l.trigger(i,"beforeRemove",{object:u});for(var s=0;s<t.length;s++){var n=t[s];switch(n.type){case"body":e.removeBody(i,n,o);break;case"constraint":e.removeConstraint(i,n,o);break;case"composite":e.removeComposite(i,n,o);break;case"mouseConstraint":e.removeConstraint(i,n.constraint);break}}return l.trigger(i,"afterRemove",{object:u}),i},e.addComposite=function(i,u){return i.composites.push(u),u.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,u,o){var t=a.indexOf(i.composites,u);if(t!==-1){var s=e.allBodies(u);e.removeCompositeAt(i,t);for(var n=0;n<s.length;n++)s[n].sleepCounter=0}if(o)for(var n=0;n<i.composites.length;n++)e.removeComposite(i.composites[n],u,!0);return i},e.removeCompositeAt=function(i,u){return i.composites.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,u){return i.bodies.push(u),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,u,o){var t=a.indexOf(i.bodies,u);if(t!==-1&&(e.removeBodyAt(i,t),u.sleepCounter=0),o)for(var s=0;s<i.composites.length;s++)e.removeBody(i.composites[s],u,!0);return i},e.removeBodyAt=function(i,u){return i.bodies.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,u){return i.constraints.push(u),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,u,o){var t=a.indexOf(i.constraints,u);if(t!==-1&&e.removeConstraintAt(i,t),o)for(var s=0;s<i.composites.length;s++)e.removeConstraint(i.composites[s],u,!0);return i},e.removeConstraintAt=function(i,u){return i.constraints.splice(u,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,u,o){if(o)for(var t=0;t<i.composites.length;t++)e.clear(i.composites[t],u,!0);return u?i.bodies=i.bodies.filter(function(s){return s.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var u=[].concat(i.bodies),o=0;o<i.composites.length;o++)u=u.concat(e.allBodies(i.composites[o]));return i.cache&&(i.cache.allBodies=u),u},e.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var u=[].concat(i.constraints),o=0;o<i.composites.length;o++)u=u.concat(e.allConstraints(i.composites[o]));return i.cache&&(i.cache.allConstraints=u),u},e.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var u=[].concat(i.composites),o=0;o<i.composites.length;o++)u=u.concat(e.allComposites(i.composites[o]));return i.cache&&(i.cache.allComposites=u),u},e.get=function(i,u,o){var t,s;switch(o){case"body":t=e.allBodies(i);break;case"constraint":t=e.allConstraints(i);break;case"composite":t=e.allComposites(i).concat(i);break}return t?(s=t.filter(function(n){return n.id.toString()===u.toString()}),s.length===0?null:s[0]):null},e.move=function(i,u,o){return e.remove(i,u),e.add(o,u),i},e.rebase=function(i){for(var u=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),o=0;o<u.length;o++)u[o].id=a.nextId();return i},e.translate=function(i,u,o){for(var t=o?e.allBodies(i):i.bodies,s=0;s<t.length;s++)h.translate(t[s],u);return i},e.rotate=function(i,u,o,t){for(var s=Math.cos(u),n=Math.sin(u),c=t?e.allBodies(i):i.bodies,d=0;d<c.length;d++){var y=c[d],w=y.position.x-o.x,M=y.position.y-o.y;h.setPosition(y,{x:o.x+(w*s-M*n),y:o.y+(w*n+M*s)}),h.rotate(y,u)}return i},e.scale=function(i,u,o,t,s){for(var n=s?e.allBodies(i):i.bodies,c=0;c<n.length;c++){var d=n[c],y=d.position.x-t.x,w=d.position.y-t.y;h.setPosition(d,{x:t.x+y*u,y:t.y+w*o}),h.scale(d,u,o)}return i},e.bounds=function(i){for(var u=e.allBodies(i),o=[],t=0;t<u.length;t+=1){var s=u[t];o.push(s.bounds.min,s.bounds.max)}return r.create(o)}})()},function(T,I,v){var e={};T.exports=e;var l=v(4),a=v(5),r=v(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(h,i){for(var u=i/r._baseDelta,o=e._motionSleepThreshold,t=0;t<h.length;t++){var s=h[t],n=l.getSpeed(s),c=l.getAngularSpeed(s),d=n*n+c*c;if(s.force.x!==0||s.force.y!==0){e.set(s,!1);continue}var y=Math.min(s.motion,d),w=Math.max(s.motion,d);s.motion=e._minBias*y+(1-e._minBias)*w,s.sleepThreshold>0&&s.motion<o?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold/u&&e.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}},e.afterCollisions=function(h){for(var i=e._motionSleepThreshold,u=0;u<h.length;u++){var o=h[u];if(o.isActive){var t=o.collision,s=t.bodyA.parent,n=t.bodyB.parent;if(!(s.isSleeping&&n.isSleeping||s.isStatic||n.isStatic)&&(s.isSleeping||n.isSleeping)){var c=s.isSleeping&&!s.isStatic?s:n,d=c===s?n:s;!c.isStatic&&d.motion>i&&e.set(c,!1)}}}},e.set=function(h,i){var u=h.isSleeping;i?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,u||a.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,u&&a.trigger(h,"sleepEnd"))}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(9);(function(){var r=[],h={overlap:0,axis:null},i={overlap:0,axis:null};e.create=function(u,o){return{pair:null,collided:!1,bodyA:u,bodyB:o,parentA:u.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(u,o,t){if(e._overlapAxes(h,u.vertices,o.vertices,u.axes),h.overlap<=0||(e._overlapAxes(i,o.vertices,u.vertices,o.axes),i.overlap<=0))return null;var s=t&&t.table[a.id(u,o)],n;s?n=s.collision:(n=e.create(u,o),n.collided=!0,n.bodyA=u.id<o.id?u:o,n.bodyB=u.id<o.id?o:u,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),u=n.bodyA,o=n.bodyB;var c;h.overlap<i.overlap?c=h:c=i;var d=n.normal,y=n.tangent,w=n.penetration,M=n.supports,f=c.overlap,p=c.axis,m=p.x,g=p.y,S=o.position.x-u.position.x,x=o.position.y-u.position.y;m*S+g*x>=0&&(m=-m,g=-g),d.x=m,d.y=g,y.x=-g,y.y=m,w.x=m*f,w.y=g*f,n.depth=f;var C=e._findSupports(u,o,d,1),P=0;if(l.contains(u.vertices,C[0])&&(M[P++]=C[0]),l.contains(u.vertices,C[1])&&(M[P++]=C[1]),P<2){var B=e._findSupports(o,u,d,-1);l.contains(o.vertices,B[0])&&(M[P++]=B[0]),P<2&&l.contains(o.vertices,B[1])&&(M[P++]=B[1])}return P===0&&(M[P++]=C[0]),n.supportCount=P,n},e._overlapAxes=function(u,o,t,s){var n=o.length,c=t.length,d=o[0].x,y=o[0].y,w=t[0].x,M=t[0].y,f=s.length,p=Number.MAX_VALUE,m=0,g,S,x,C,P,B;for(P=0;P<f;P++){var E=s[P],L=E.x,D=E.y,R=d*L+y*D,k=w*L+M*D,F=R,W=k;for(B=1;B<n;B+=1)C=o[B].x*L+o[B].y*D,C>F?F=C:C<R&&(R=C);for(B=1;B<c;B+=1)C=t[B].x*L+t[B].y*D,C>W?W=C:C<k&&(k=C);if(S=F-k,x=W-R,g=S<x?S:x,g<p&&(p=g,m=P,g<=0))break}u.axis=s[m],u.overlap=p},e._findSupports=function(u,o,t,s){var n=o.vertices,c=n.length,d=u.position.x,y=u.position.y,w=t.x*s,M=t.y*s,f=n[0],p=f,m=w*(d-p.x)+M*(y-p.y),g,S,x;for(x=1;x<c;x+=1)p=n[x],S=w*(d-p.x)+M*(y-p.y),S<m&&(m=S,f=p);return g=n[(c+f.index-1)%c],m=w*(d-g.x)+M*(y-g.y),p=n[(f.index+1)%c],w*(d-p.x)+M*(y-p.y)<m?(r[0]=f,r[1]=p,r):(r[0]=f,r[1]=g,r)}})()},function(T,I,v){var e={};T.exports=e;var l=v(16);(function(){e.create=function(a,r){var h=a.bodyA,i=a.bodyB,u={id:e.id(h,i),bodyA:h,bodyB:i,collision:a,contacts:[l.create(),l.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||i.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,a,r),u},e.update=function(a,r,h){var i=r.supports,u=r.supportCount,o=a.contacts,t=r.parentA,s=r.parentB;a.isActive=!0,a.timeUpdated=h,a.collision=r,a.separation=r.depth,a.inverseMass=t.inverseMass+s.inverseMass,a.friction=t.friction<s.friction?t.friction:s.friction,a.frictionStatic=t.frictionStatic>s.frictionStatic?t.frictionStatic:s.frictionStatic,a.restitution=t.restitution>s.restitution?t.restitution:s.restitution,a.slop=t.slop>s.slop?t.slop:s.slop,a.contactCount=u,r.pair=a;var n=i[0],c=o[0],d=i[1],y=o[1];(y.vertex===n||c.vertex===d)&&(o[1]=c,o[0]=c=y,y=o[1]),c.vertex=n,y.vertex=d},e.setActive=function(a,r,h){r?(a.isActive=!0,a.timeUpdated=h):(a.isActive=!1,a.contactCount=0)},e.id=function(a,r){return a.id<r.id?a.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+a.id.toString(36)}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(2),r=v(7),h=v(1),i=v(11),u=v(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(o){var t=o;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var s=t.bodyA?a.add(t.bodyA.position,t.pointA):t.pointA,n=t.bodyB?a.add(t.bodyB.position,t.pointB):t.pointB,c=a.magnitude(a.sub(s,n));t.length=typeof t.length<"u"?t.length:c,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=u.extend(d,t.render),t},e.preSolveAll=function(o){for(var t=0;t<o.length;t+=1){var s=o[t],n=s.constraintImpulse;s.isStatic||n.x===0&&n.y===0&&n.angle===0||(s.position.x+=n.x,s.position.y+=n.y,s.angle+=n.angle)}},e.solveAll=function(o,t){for(var s=u.clamp(t/u._baseDelta,0,1),n=0;n<o.length;n+=1){var c=o[n],d=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(d||y)&&e.solve(o[n],s)}for(n=0;n<o.length;n+=1)c=o[n],d=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!d&&!y&&e.solve(o[n],s)},e.solve=function(o,t){var s=o.bodyA,n=o.bodyB,c=o.pointA,d=o.pointB;if(!(!s&&!n)){s&&!s.isStatic&&(a.rotate(c,s.angle-o.angleA,c),o.angleA=s.angle),n&&!n.isStatic&&(a.rotate(d,n.angle-o.angleB,d),o.angleB=n.angle);var y=c,w=d;if(s&&(y=a.add(s.position,c)),n&&(w=a.add(n.position,d)),!(!y||!w)){var M=a.sub(y,w),f=a.magnitude(M);f<e._minLength&&(f=e._minLength);var p=(f-o.length)/f,m=o.stiffness>=1||o.length===0,g=m?o.stiffness*t:o.stiffness*t*t,S=o.damping*t,x=a.mult(M,p*g),C=(s?s.inverseMass:0)+(n?n.inverseMass:0),P=(s?s.inverseInertia:0)+(n?n.inverseInertia:0),B=C+P,E,L,D,R,k;if(S>0){var F=a.create();D=a.div(M,f),k=a.sub(n&&a.sub(n.position,n.positionPrev)||F,s&&a.sub(s.position,s.positionPrev)||F),R=a.dot(D,k)}s&&!s.isStatic&&(L=s.inverseMass/C,s.constraintImpulse.x-=x.x*L,s.constraintImpulse.y-=x.y*L,s.position.x-=x.x*L,s.position.y-=x.y*L,S>0&&(s.positionPrev.x-=S*D.x*R*L,s.positionPrev.y-=S*D.y*R*L),E=a.cross(c,x)/B*e._torqueDampen*s.inverseInertia*(1-o.angularStiffness),s.constraintImpulse.angle-=E,s.angle-=E),n&&!n.isStatic&&(L=n.inverseMass/C,n.constraintImpulse.x+=x.x*L,n.constraintImpulse.y+=x.y*L,n.position.x+=x.x*L,n.position.y+=x.y*L,S>0&&(n.positionPrev.x+=S*D.x*R*L,n.positionPrev.y+=S*D.y*R*L),E=a.cross(d,x)/B*e._torqueDampen*n.inverseInertia*(1-o.angularStiffness),n.constraintImpulse.angle+=E,n.angle+=E)}}},e.postSolveAll=function(o){for(var t=0;t<o.length;t++){var s=o[t],n=s.constraintImpulse;if(!(s.isStatic||n.x===0&&n.y===0&&n.angle===0)){r.set(s,!1);for(var c=0;c<s.parts.length;c++){var d=s.parts[c];l.translate(d.vertices,n),c>0&&(d.position.x+=n.x,d.position.y+=n.y),n.angle!==0&&(l.rotate(d.vertices,n.angle,s.position),i.rotate(d.axes,n.angle),c>0&&a.rotateAbout(d.position,n.angle,s.position,d.position)),h.update(d.bounds,d.vertices,s.velocity)}n.angle*=e._warming,n.x*=e._warming,n.y*=e._warming}}},e.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},e.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}},e.currentLength=function(o){var t=(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),s=(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0),n=(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),c=(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0),d=t-n,y=s-c;return Math.sqrt(d*d+y*y)}})()},function(T,I,v){var e={};T.exports=e;var l=v(2),a=v(0);(function(){e.fromVertices=function(r){for(var h={},i=0;i<r.length;i++){var u=(i+1)%r.length,o=l.normalise({x:r[u].y-r[i].y,y:r[i].x-r[u].x}),t=o.y===0?1/0:o.x/o.y;t=t.toFixed(3).toString(),h[t]=o}return a.values(h)},e.rotate=function(r,h){if(h!==0)for(var i=Math.cos(h),u=Math.sin(h),o=0;o<r.length;o++){var t=r[o],s;s=t.x*i-t.y*u,t.y=t.x*u+t.y*i,t.x=s}}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(0),r=v(4),h=v(1),i=v(2);(function(){e.rectangle=function(u,o,t,s,n){n=n||{};var c={label:"Rectangle Body",position:{x:u,y:o},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+s+" L 0 "+s)};if(n.chamfer){var d=n.chamfer;c.vertices=l.chamfer(c.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete n.chamfer}return r.create(a.extend({},c,n))},e.trapezoid=function(u,o,t,s,n,c){c=c||{},n>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),n*=.5;var d=(1-n*2)*t,y=t*n,w=y+d,M=w+y,f;n<.5?f="L 0 0 L "+y+" "+-s+" L "+w+" "+-s+" L "+M+" 0":f="L 0 0 L "+w+" "+-s+" L "+M+" 0";var p={label:"Trapezoid Body",position:{x:u,y:o},vertices:l.fromPath(f)};if(c.chamfer){var m=c.chamfer;p.vertices=l.chamfer(p.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete c.chamfer}return r.create(a.extend({},p,c))},e.circle=function(u,o,t,s,n){s=s||{};var c={label:"Circle Body",circleRadius:t};n=n||25;var d=Math.ceil(Math.max(10,Math.min(n,t)));return d%2===1&&(d+=1),e.polygon(u,o,d,t,a.extend({},c,s))},e.polygon=function(u,o,t,s,n){if(n=n||{},t<3)return e.circle(u,o,s,n);for(var c=2*Math.PI/t,d="",y=c*.5,w=0;w<t;w+=1){var M=y+w*c,f=Math.cos(M)*s,p=Math.sin(M)*s;d+="L "+f.toFixed(3)+" "+p.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:u,y:o},vertices:l.fromPath(d)};if(n.chamfer){var g=n.chamfer;m.vertices=l.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete n.chamfer}return r.create(a.extend({},m,n))},e.fromVertices=function(u,o,t,s,n,c,d,y){var w=a.getDecomp(),M,f,p,m,g,S,x,C,P,B,E;for(M=!!(w&&w.quickDecomp),s=s||{},p=[],n=typeof n<"u"?n:!1,c=typeof c<"u"?c:.01,d=typeof d<"u"?d:10,y=typeof y<"u"?y:.01,a.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(S=t[B],m=l.isConvex(S),g=!m,g&&!M&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),m||!M)m?S=l.clockwiseSort(S):S=l.hull(S),p.push({position:{x:u,y:o},vertices:S});else{var L=S.map(function(H){return[H.x,H.y]});w.makeCCW(L),c!==!1&&w.removeCollinearPoints(L,c),y!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(L,y);var D=w.quickDecomp(L);for(x=0;x<D.length;x++){var R=D[x],k=R.map(function(H){return{x:H[0],y:H[1]}});d>0&&l.area(k)<d||p.push({position:l.centre(k),vertices:k})}}for(x=0;x<p.length;x++)p[x]=r.create(a.extend(p[x],s));if(n){var F=5;for(x=0;x<p.length;x++){var W=p[x];for(C=x+1;C<p.length;C++){var z=p[C];if(h.overlaps(W.bounds,z.bounds)){var U=W.vertices,G=z.vertices;for(P=0;P<W.vertices.length;P++)for(E=0;E<z.vertices.length;E++){var b=i.magnitudeSquared(i.sub(U[(P+1)%U.length],G[E])),Q=i.magnitudeSquared(i.sub(U[P],G[(E+1)%G.length]));b<F&&Q<F&&(U[P].isInternal=!0,G[E].isInternal=!0)}}}}}return p.length>1?(f=r.create(a.extend({parts:p.slice(0)},s)),r.setPosition(f,{x:u,y:o}),f):p[0]}})()},function(T,I,v){var e={};T.exports=e;var l=v(0),a=v(8);(function(){e.create=function(r){var h={bodies:[],collisions:[],pairs:null};return l.extend(h,r)},e.setBodies=function(r,h){r.bodies=h.slice(0)},e.clear=function(r){r.bodies=[],r.collisions=[]},e.collisions=function(r){var h=r.pairs,i=r.bodies,u=i.length,o=e.canCollide,t=a.collides,s=r.collisions,n=0,c,d;for(i.sort(e._compareBoundsX),c=0;c<u;c++){var y=i[c],w=y.bounds,M=y.bounds.max.x,f=y.bounds.max.y,p=y.bounds.min.y,m=y.isStatic||y.isSleeping,g=y.parts.length,S=g===1;for(d=c+1;d<u;d++){var x=i[d],C=x.bounds;if(C.min.x>M)break;if(!(f<C.min.y||p>C.max.y)&&!(m&&(x.isStatic||x.isSleeping))&&o(y.collisionFilter,x.collisionFilter)){var P=x.parts.length;if(S&&P===1){var B=t(y,x,h);B&&(s[n++]=B)}else for(var E=g>1?1:0,L=P>1?1:0,D=E;D<g;D++)for(var R=y.parts[D],w=R.bounds,k=L;k<P;k++){var F=x.parts[k],C=F.bounds;if(!(w.min.x>C.max.x||w.max.x<C.min.x||w.max.y<C.min.y||w.min.y>C.max.y)){var B=t(R,F,h);B&&(s[n++]=B)}}}}}return s.length!==n&&(s.length=n),s},e.canCollide=function(r,h){return r.group===h.group&&r.group!==0?r.group>0:(r.mask&h.category)!==0&&(h.mask&r.category)!==0},e._compareBoundsX=function(r,h){return r.bounds.min.x-h.bounds.min.x}})()},function(T,I,v){var e={};T.exports=e;var l=v(0);(function(){e.create=function(a){var r={};return a||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=a||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(h){var i=e._getRelativeMousePosition(h,r.element,r.pixelRatio),u=h.changedTouches;u&&(r.button=0,h.preventDefault()),r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=h},r.mousedown=function(h){var i=e._getRelativeMousePosition(h,r.element,r.pixelRatio),u=h.changedTouches;u?(r.button=0,h.preventDefault()):r.button=h.button,r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=h},r.mouseup=function(h){var i=e._getRelativeMousePosition(h,r.element,r.pixelRatio),u=h.changedTouches;u&&h.preventDefault(),r.button=-1,r.absolute.x=i.x,r.absolute.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=h},r.mousewheel=function(h){r.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault(),r.sourceEvents.mousewheel=h},e.setElement(r,r.element),r},e.setElement=function(a,r){a.element=r,r.addEventListener("mousemove",a.mousemove,{passive:!0}),r.addEventListener("mousedown",a.mousedown,{passive:!0}),r.addEventListener("mouseup",a.mouseup,{passive:!0}),r.addEventListener("wheel",a.mousewheel,{passive:!1}),r.addEventListener("touchmove",a.mousemove,{passive:!1}),r.addEventListener("touchstart",a.mousedown,{passive:!1}),r.addEventListener("touchend",a.mouseup,{passive:!1})},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,r){a.offset.x=r.x,a.offset.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,r){a.scale.x=r.x,a.scale.y=r.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,r,h){var i=r.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,o=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,s=a.changedTouches,n,c;return s?(n=s[0].pageX-i.left-o,c=s[0].pageY-i.top-t):(n=a.pageX-i.left-o,c=a.pageY-i.top-t),{x:n/(r.clientWidth/(r.width||r.clientWidth)*h),y:c/(r.clientHeight/(r.height||r.clientHeight)*h)}}})()},function(T,I,v){var e={};T.exports=e;var l=v(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||l.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var r=e._registry[a.name],h=e.versionParse(a.version).number,i=e.versionParse(r.version).number;h>i?(l.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(a)),e._registry[a.name]=a):h<i?l.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(a)):a!==r&&l.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,r){return a.used.indexOf(r)>-1},e.isFor=function(a,r){var h=a.for&&e.dependencyParse(a.for);return!a.for||r.name===h.name&&e.versionSatisfies(r.version,h.range)},e.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){l.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var h=e.dependencies(a),i=l.topologicalSort(h),u=[],o=0;o<i.length;o+=1)if(i[o]!==a.name){var t=e.resolve(i[o]);if(!t){u.push("❌ "+i[o]);continue}e.isUsed(a,t.name)||(e.isFor(t,a)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(a)+"."),t._warned=!0),t.install?t.install(a):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("🔶 "+e.toString(t)),delete t._warned):u.push("✅ "+e.toString(t)),a.used.push(t.name))}u.length>0&&l.info(u.join("  "))},e.dependencies=function(a,r){var h=e.dependencyParse(a),i=h.name;if(r=r||{},!(i in r)){a=e.resolve(a)||a,r[i]=l.map(a.uses||[],function(o){e.isPlugin(o)&&e.register(o);var t=e.dependencyParse(o),s=e.resolve(o);return s&&!e.versionSatisfies(s.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(s),"does not satisfy",e.toString(t),"used by",e.toString(h)+"."),s._warned=!0,a._warned=!0):s||(l.warn("Plugin.dependencies:",e.toString(o),"used by",e.toString(h),"could not be resolved."),a._warned=!0),t.name});for(var u=0;u<r[i].length;u+=1)e.dependencies(r[i][u],r);return r}},e.dependencyParse=function(a){if(l.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var h=r.exec(a),i=Number(h[4]),u=Number(h[5]),o=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:a,operator:h[1]||h[2]||"",major:i,minor:u,patch:o,parts:[i,u,o],prerelease:h[7],number:i*1e8+u*1e4+o}},e.versionSatisfies=function(a,r){r=r||"*";var h=e.versionParse(r),i=e.versionParse(a);if(h.isRange){if(h.operator==="*"||a==="*")return!0;if(h.operator===">")return i.number>h.number;if(h.operator===">=")return i.number>=h.number;if(h.operator==="~")return i.major===h.major&&i.minor===h.minor&&i.patch>=h.patch;if(h.operator==="^")return h.major>0?i.major===h.major&&i.number>=h.number:h.minor>0?i.minor===h.minor&&i.patch>=h.patch:i.patch===h.patch}return a===r||a==="*"}})()},function(T,I){var v={};T.exports=v,function(){v.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(T,I,v){var e={};T.exports=e;var l=v(7),a=v(18),r=v(13),h=v(19),i=v(5),u=v(6),o=v(10),t=v(0),s=v(4);(function(){e._deltaMax=1e3/60,e.create=function(n){n=n||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},d=t.extend(c,n);return d.world=n.world||u.create({label:"World"}),d.pairs=n.pairs||h.create(),d.detector=n.detector||r.create(),d.detector.pairs=d.pairs,d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(n,c){var d=t.now(),y=n.world,w=n.detector,M=n.pairs,f=n.timing,p=f.timestamp,m;c>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),c=typeof c<"u"?c:t._baseDelta,c*=f.timeScale,f.timestamp+=c,f.lastDelta=c;var g={timestamp:f.timestamp,delta:c};i.trigger(n,"beforeUpdate",g);var S=u.allBodies(y),x=u.allConstraints(y);for(y.isModified&&(r.setBodies(w,S),u.setModified(y,!1,!1,!0)),n.enableSleeping&&l.update(S,c),e._bodiesApplyGravity(S,n.gravity),c>0&&e._bodiesUpdate(S,c),i.trigger(n,"beforeSolve",g),o.preSolveAll(S),m=0;m<n.constraintIterations;m++)o.solveAll(x,c);o.postSolveAll(S);var C=r.collisions(w);h.update(M,C,p),n.enableSleeping&&l.afterCollisions(M.list),M.collisionStart.length>0&&i.trigger(n,"collisionStart",{pairs:M.collisionStart,timestamp:f.timestamp,delta:c});var P=t.clamp(20/n.positionIterations,0,1);for(a.preSolvePosition(M.list),m=0;m<n.positionIterations;m++)a.solvePosition(M.list,c,P);for(a.postSolvePosition(S),o.preSolveAll(S),m=0;m<n.constraintIterations;m++)o.solveAll(x,c);for(o.postSolveAll(S),a.preSolveVelocity(M.list),m=0;m<n.velocityIterations;m++)a.solveVelocity(M.list,c);return e._bodiesUpdateVelocities(S),M.collisionActive.length>0&&i.trigger(n,"collisionActive",{pairs:M.collisionActive,timestamp:f.timestamp,delta:c}),M.collisionEnd.length>0&&i.trigger(n,"collisionEnd",{pairs:M.collisionEnd,timestamp:f.timestamp,delta:c}),e._bodiesClearForces(S),i.trigger(n,"afterUpdate",g),n.timing.lastElapsed=t.now()-d,n},e.merge=function(n,c){if(t.extend(n,c),c.world){n.world=c.world,e.clear(n);for(var d=u.allBodies(n.world),y=0;y<d.length;y++){var w=d[y];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(n){h.clear(n.pairs),r.clear(n.detector)},e._bodiesClearForces=function(n){for(var c=n.length,d=0;d<c;d++){var y=n[d];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(n,c){var d=typeof c.scale<"u"?c.scale:.001,y=n.length;if(!(c.x===0&&c.y===0||d===0))for(var w=0;w<y;w++){var M=n[w];M.isStatic||M.isSleeping||(M.force.y+=M.mass*c.y*d,M.force.x+=M.mass*c.x*d)}},e._bodiesUpdate=function(n,c){for(var d=n.length,y=0;y<d;y++){var w=n[y];w.isStatic||w.isSleeping||s.update(w,c)}},e._bodiesUpdateVelocities=function(n){for(var c=n.length,d=0;d<c;d++)s.updateVelocities(n[d])}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(0),r=v(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(h){var i,u,o,t=h.length;for(i=0;i<t;i++)u=h[i],u.isActive&&(o=u.contactCount,u.collision.parentA.totalContacts+=o,u.collision.parentB.totalContacts+=o)},e.solvePosition=function(h,i,u){var o,t,s,n,c,d,y,w,M=e._positionDampen*(u||1),f=a.clamp(i/a._baseDelta,0,1),p=h.length;for(o=0;o<p;o++)t=h[o],!(!t.isActive||t.isSensor)&&(s=t.collision,n=s.parentA,c=s.parentB,d=s.normal,t.separation=s.depth+d.x*(c.positionImpulse.x-n.positionImpulse.x)+d.y*(c.positionImpulse.y-n.positionImpulse.y));for(o=0;o<p;o++)t=h[o],!(!t.isActive||t.isSensor)&&(s=t.collision,n=s.parentA,c=s.parentB,d=s.normal,w=t.separation-t.slop*f,(n.isStatic||c.isStatic)&&(w*=2),n.isStatic||n.isSleeping||(y=M/n.totalContacts,n.positionImpulse.x+=d.x*w*y,n.positionImpulse.y+=d.y*w*y),c.isStatic||c.isSleeping||(y=M/c.totalContacts,c.positionImpulse.x-=d.x*w*y,c.positionImpulse.y-=d.y*w*y))},e.postSolvePosition=function(h){for(var i=e._positionWarming,u=h.length,o=l.translate,t=r.update,s=0;s<u;s++){var n=h[s],c=n.positionImpulse,d=c.x,y=c.y,w=n.velocity;if(n.totalContacts=0,d!==0||y!==0){for(var M=0;M<n.parts.length;M++){var f=n.parts[M];o(f.vertices,c),t(f.bounds,f.vertices,w),f.position.x+=d,f.position.y+=y}n.positionPrev.x+=d,n.positionPrev.y+=y,d*w.x+y*w.y<0?(c.x=0,c.y=0):(c.x*=i,c.y*=i)}}},e.preSolveVelocity=function(h){var i=h.length,u,o;for(u=0;u<i;u++){var t=h[u];if(!(!t.isActive||t.isSensor)){var s=t.contacts,n=t.contactCount,c=t.collision,d=c.parentA,y=c.parentB,w=c.normal,M=c.tangent;for(o=0;o<n;o++){var f=s[o],p=f.vertex,m=f.normalImpulse,g=f.tangentImpulse;if(m!==0||g!==0){var S=w.x*m+M.x*g,x=w.y*m+M.y*g;d.isStatic||d.isSleeping||(d.positionPrev.x+=S*d.inverseMass,d.positionPrev.y+=x*d.inverseMass,d.anglePrev+=d.inverseInertia*((p.x-d.position.x)*x-(p.y-d.position.y)*S)),y.isStatic||y.isSleeping||(y.positionPrev.x-=S*y.inverseMass,y.positionPrev.y-=x*y.inverseMass,y.anglePrev-=y.inverseInertia*((p.x-y.position.x)*x-(p.y-y.position.y)*S))}}}}},e.solveVelocity=function(h,i){var u=i/a._baseDelta,o=u*u,t=o*u,s=-e._restingThresh*u,n=e._restingThreshTangent,c=e._frictionNormalMultiplier*u,d=e._frictionMaxStatic,y=h.length,w,M,f,p;for(f=0;f<y;f++){var m=h[f];if(!(!m.isActive||m.isSensor)){var g=m.collision,S=g.parentA,x=g.parentB,C=g.normal.x,P=g.normal.y,B=g.tangent.x,E=g.tangent.y,L=m.inverseMass,D=m.friction*m.frictionStatic*c,R=m.contacts,k=m.contactCount,F=1/k,W=S.position.x-S.positionPrev.x,z=S.position.y-S.positionPrev.y,U=S.angle-S.anglePrev,G=x.position.x-x.positionPrev.x,b=x.position.y-x.positionPrev.y,Q=x.angle-x.anglePrev;for(p=0;p<k;p++){var H=R[p],Y=H.vertex,N=Y.x-S.position.x,j=Y.y-S.position.y,Z=Y.x-x.position.x,$=Y.y-x.position.y,X=W-j*U,xe=z+N*U,ye=G-$*Q,Se=b+Z*Q,ae=X-ye,le=xe-Se,te=C*ae+P*le,K=B*ae+E*le,fe=m.separation+te,ie=Math.min(fe,1);ie=fe<0?0:ie;var ce=ie*D;K<-ce||K>ce?(M=K>0?K:-K,w=m.friction*(K>0?1:-1)*t,w<-M?w=-M:w>M&&(w=M)):(w=K,M=d);var ue=N*P-j*C,he=Z*P-$*C,ve=F/(L+S.inverseInertia*ue*ue+x.inverseInertia*he*he),q=(1+m.restitution)*te*ve;if(w*=ve,te<s)H.normalImpulse=0;else{var we=H.normalImpulse;H.normalImpulse+=q,H.normalImpulse>0&&(H.normalImpulse=0),q=H.normalImpulse-we}if(K<-n||K>n)H.tangentImpulse=0;else{var Ce=H.tangentImpulse;H.tangentImpulse+=w,H.tangentImpulse<-M&&(H.tangentImpulse=-M),H.tangentImpulse>M&&(H.tangentImpulse=M),w=H.tangentImpulse-Ce}var _=C*q+B*w,ee=P*q+E*w;S.isStatic||S.isSleeping||(S.positionPrev.x+=_*S.inverseMass,S.positionPrev.y+=ee*S.inverseMass,S.anglePrev+=(N*ee-j*_)*S.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=_*x.inverseMass,x.positionPrev.y-=ee*x.inverseMass,x.anglePrev-=(Z*ee-$*_)*x.inverseInertia)}}}}})()},function(T,I,v){var e={};T.exports=e;var l=v(9),a=v(0);(function(){e.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,h,i){var u=l.update,o=l.create,t=l.setActive,s=r.table,n=r.list,c=n.length,d=c,y=r.collisionStart,w=r.collisionEnd,M=r.collisionActive,f=h.length,p=0,m=0,g=0,S,x,C;for(C=0;C<f;C++)S=h[C],x=S.pair,x?(x.isActive&&(M[g++]=x),u(x,S,i)):(x=o(S,i),s[x.id]=x,y[p++]=x,n[d++]=x);for(d=0,c=n.length,C=0;C<c;C++)x=n[C],x.timeUpdated>=i?n[d++]=x:(t(x,!1,i),x.collision.bodyA.sleepCounter>0&&x.collision.bodyB.sleepCounter>0?n[d++]=x:(w[m++]=x,delete s[x.id]));n.length!==d&&(n.length=d),y.length!==p&&(y.length=p),w.length!==m&&(w.length=m),M.length!==g&&(M.length=g)},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},function(T,I,v){var e=T.exports=v(21);e.Axes=v(11),e.Bodies=v(12),e.Body=v(4),e.Bounds=v(1),e.Collision=v(8),e.Common=v(0),e.Composite=v(6),e.Composites=v(22),e.Constraint=v(10),e.Contact=v(16),e.Detector=v(13),e.Engine=v(17),e.Events=v(5),e.Grid=v(23),e.Mouse=v(14),e.MouseConstraint=v(24),e.Pair=v(9),e.Pairs=v(19),e.Plugin=v(15),e.Query=v(25),e.Render=v(26),e.Resolver=v(18),e.Runner=v(27),e.SAT=v(28),e.Sleeping=v(7),e.Svg=v(29),e.Vector=v(2),e.Vertices=v(3),e.World=v(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(T,I,v){var e={};T.exports=e;var l=v(15),a=v(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,h){return r=r.replace(/^Matter./,""),a.chainPathBefore(e,r,h)},e.after=function(r,h){return r=r.replace(/^Matter./,""),a.chainPathAfter(e,r,h)}})()},function(T,I,v){var e={};T.exports=e;var l=v(6),a=v(10),r=v(0),h=v(4),i=v(12),u=r.deprecated;(function(){e.stack=function(o,t,s,n,c,d,y){for(var w=l.create({label:"Stack"}),M=o,f=t,p,m=0,g=0;g<n;g++){for(var S=0,x=0;x<s;x++){var C=y(M,f,x,g,p,m);if(C){var P=C.bounds.max.y-C.bounds.min.y,B=C.bounds.max.x-C.bounds.min.x;P>S&&(S=P),h.translate(C,{x:B*.5,y:P*.5}),M=C.bounds.max.x+c,l.addBody(w,C),p=C,m+=1}else M+=c}f+=S+d,M=o}return w},e.chain=function(o,t,s,n,c,d){for(var y=o.bodies,w=1;w<y.length;w++){var M=y[w-1],f=y[w],p=M.bounds.max.y-M.bounds.min.y,m=M.bounds.max.x-M.bounds.min.x,g=f.bounds.max.y-f.bounds.min.y,S=f.bounds.max.x-f.bounds.min.x,x={bodyA:M,pointA:{x:m*t,y:p*s},bodyB:f,pointB:{x:S*n,y:g*c}},C=r.extend(x,d);l.addConstraint(o,a.create(C))}return o.label+=" Chain",o},e.mesh=function(o,t,s,n,c){var d=o.bodies,y,w,M,f,p;for(y=0;y<s;y++){for(w=1;w<t;w++)M=d[w-1+y*t],f=d[w+y*t],l.addConstraint(o,a.create(r.extend({bodyA:M,bodyB:f},c)));if(y>0)for(w=0;w<t;w++)M=d[w+(y-1)*t],f=d[w+y*t],l.addConstraint(o,a.create(r.extend({bodyA:M,bodyB:f},c))),n&&w>0&&(p=d[w-1+(y-1)*t],l.addConstraint(o,a.create(r.extend({bodyA:p,bodyB:f},c)))),n&&w<t-1&&(p=d[w+1+(y-1)*t],l.addConstraint(o,a.create(r.extend({bodyA:p,bodyB:f},c))))}return o.label+=" Mesh",o},e.pyramid=function(o,t,s,n,c,d,y){return e.stack(o,t,s,n,c,d,function(w,M,f,p,m,g){var S=Math.min(n,Math.ceil(s/2)),x=m?m.bounds.max.x-m.bounds.min.x:0;if(!(p>S)){p=S-p;var C=p,P=s-1-p;if(!(f<C||f>P)){g===1&&h.translate(m,{x:(f+(s%2===1?1:-1))*x,y:0});var B=m?f*x:0;return y(o+B+f*c,M,f,p,m,g)}}})},e.newtonsCradle=function(o,t,s,n,c){for(var d=l.create({label:"Newtons Cradle"}),y=0;y<s;y++){var w=1.9,M=i.circle(o+y*(n*w),t+c,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),f=a.create({pointA:{x:o+y*(n*w),y:t},bodyB:M});l.addBody(d,M),l.addConstraint(d,f)}return d},u(e,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),e.car=function(o,t,s,n,c){var d=h.nextGroup(!0),y=20,w=-s*.5+y,M=s*.5-y,f=0,p=l.create({label:"Car"}),m=i.rectangle(o,t,s,n,{collisionFilter:{group:d},chamfer:{radius:n*.5},density:2e-4}),g=i.circle(o+w,t+f,c,{collisionFilter:{group:d},friction:.8}),S=i.circle(o+M,t+f,c,{collisionFilter:{group:d},friction:.8}),x=a.create({bodyB:m,pointB:{x:w,y:f},bodyA:g,stiffness:1,length:0}),C=a.create({bodyB:m,pointB:{x:M,y:f},bodyA:S,stiffness:1,length:0});return l.addBody(p,m),l.addBody(p,g),l.addBody(p,S),l.addConstraint(p,x),l.addConstraint(p,C),p},u(e,"car","Composites.car ➤ moved to car example"),e.softBody=function(o,t,s,n,c,d,y,w,M,f){M=r.extend({inertia:1/0},M),f=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},f);var p=e.stack(o,t,s,n,c,d,function(m,g){return i.circle(m,g,w,M)});return e.mesh(p,s,n,y,f),p.label="Soft Body",p},u(e,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(T,I,v){var e={};T.exports=e;var l=v(9),a=v(0),r=a.deprecated;(function(){e.create=function(h){var i={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(i,h)},e.update=function(h,i,u,o){var t,s,n,c=u.world,d=h.buckets,y,w,M=!1;for(t=0;t<i.length;t++){var f=i[t];if(!(f.isSleeping&&!o)&&!(c.bounds&&(f.bounds.max.x<c.bounds.min.x||f.bounds.min.x>c.bounds.max.x||f.bounds.max.y<c.bounds.min.y||f.bounds.min.y>c.bounds.max.y))){var p=e._getRegion(h,f);if(!f.region||p.id!==f.region.id||o){(!f.region||o)&&(f.region=p);var m=e._regionUnion(p,f.region);for(s=m.startCol;s<=m.endCol;s++)for(n=m.startRow;n<=m.endRow;n++){w=e._getBucketId(s,n),y=d[w];var g=s>=p.startCol&&s<=p.endCol&&n>=p.startRow&&n<=p.endRow,S=s>=f.region.startCol&&s<=f.region.endCol&&n>=f.region.startRow&&n<=f.region.endRow;!g&&S&&S&&y&&e._bucketRemoveBody(h,y,f),(f.region===p||g&&!S||o)&&(y||(y=e._createBucket(d,w)),e._bucketAddBody(h,y,f))}f.region=p,M=!0}}}M&&(h.pairsList=e._createActivePairsList(h))},r(e,"update","Grid.update ➤ replaced by Matter.Detector"),e.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},r(e,"clear","Grid.clear ➤ replaced by Matter.Detector"),e._regionUnion=function(h,i){var u=Math.min(h.startCol,i.startCol),o=Math.max(h.endCol,i.endCol),t=Math.min(h.startRow,i.startRow),s=Math.max(h.endRow,i.endRow);return e._createRegion(u,o,t,s)},e._getRegion=function(h,i){var u=i.bounds,o=Math.floor(u.min.x/h.bucketWidth),t=Math.floor(u.max.x/h.bucketWidth),s=Math.floor(u.min.y/h.bucketHeight),n=Math.floor(u.max.y/h.bucketHeight);return e._createRegion(o,t,s,n)},e._createRegion=function(h,i,u,o){return{id:h+","+i+","+u+","+o,startCol:h,endCol:i,startRow:u,endRow:o}},e._getBucketId=function(h,i){return"C"+h+"R"+i},e._createBucket=function(h,i){var u=h[i]=[];return u},e._bucketAddBody=function(h,i,u){var o=h.pairs,t=l.id,s=i.length,n;for(n=0;n<s;n++){var c=i[n];if(!(u.id===c.id||u.isStatic&&c.isStatic)){var d=t(u,c),y=o[d];y?y[2]+=1:o[d]=[u,c,1]}}i.push(u)},e._bucketRemoveBody=function(h,i,u){var o=h.pairs,t=l.id,s;i.splice(a.indexOf(i,u),1);var n=i.length;for(s=0;s<n;s++){var c=o[t(u,i[s])];c&&(c[2]-=1)}},e._createActivePairsList=function(h){var i,u=h.pairs,o=a.keys(u),t=o.length,s=[],n;for(n=0;n<t;n++)i=u[o[n]],i[2]>0?s.push(i):delete u[o[n]];return s}})()},function(T,I,v){var e={};T.exports=e;var l=v(3),a=v(7),r=v(14),h=v(5),i=v(13),u=v(10),o=v(6),t=v(0),s=v(1);(function(){e.create=function(n,c){var d=(n?n.mouse:null)||(c?c.mouse:null);d||(n&&n.render&&n.render.canvas?d=r.create(n.render.canvas):c&&c.element?d=r.create(c.element):(d=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=u.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},M=t.extend(w,c);return h.on(n,"beforeUpdate",function(){var f=o.allBodies(n.world);e.update(M,f),e._triggerEvents(M)}),M},e.update=function(n,c){var d=n.mouse,y=n.constraint,w=n.body;if(d.button===0){if(y.bodyB)a.set(y.bodyB,!1),y.pointA=d.position;else for(var M=0;M<c.length;M++)if(w=c[M],s.contains(w.bounds,d.position)&&i.canCollide(w.collisionFilter,n.collisionFilter))for(var f=w.parts.length>1?1:0;f<w.parts.length;f++){var p=w.parts[f];if(l.contains(p.vertices,d.position)){y.pointA=d.position,y.bodyB=n.body=w,y.pointB={x:d.position.x-w.position.x,y:d.position.y-w.position.y},y.angleB=w.angle,a.set(w,!1),h.trigger(n,"startdrag",{mouse:d,body:w});break}}}else y.bodyB=n.body=null,y.pointB=null,w&&h.trigger(n,"enddrag",{mouse:d,body:w})},e._triggerEvents=function(n){var c=n.mouse,d=c.sourceEvents;d.mousemove&&h.trigger(n,"mousemove",{mouse:c}),d.mousedown&&h.trigger(n,"mousedown",{mouse:c}),d.mouseup&&h.trigger(n,"mouseup",{mouse:c}),r.clearSourceEvents(c)}})()},function(T,I,v){var e={};T.exports=e;var l=v(2),a=v(8),r=v(1),h=v(12),i=v(3);(function(){e.collides=function(u,o){for(var t=[],s=o.length,n=u.bounds,c=a.collides,d=r.overlaps,y=0;y<s;y++){var w=o[y],M=w.parts.length,f=M===1?0:1;if(d(w.bounds,n))for(var p=f;p<M;p++){var m=w.parts[p];if(d(m.bounds,n)){var g=c(m,u);if(g){t.push(g);break}}}}return t},e.ray=function(u,o,t,s){s=s||1e-100;for(var n=l.angle(o,t),c=l.magnitude(l.sub(o,t)),d=(t.x+o.x)*.5,y=(t.y+o.y)*.5,w=h.rectangle(d,y,c,s,{angle:n}),M=e.collides(w,u),f=0;f<M.length;f+=1){var p=M[f];p.body=p.bodyB=p.bodyA}return M},e.region=function(u,o,t){for(var s=[],n=0;n<u.length;n++){var c=u[n],d=r.overlaps(c.bounds,o);(d&&!t||!d&&t)&&s.push(c)}return s},e.point=function(u,o){for(var t=[],s=0;s<u.length;s++){var n=u[s];if(r.contains(n.bounds,o))for(var c=n.parts.length===1?0:1;c<n.parts.length;c++){var d=n.parts[c];if(r.contains(d.bounds,o)&&i.contains(d.vertices,o)){t.push(n);break}}}return t}})()},function(T,I,v){var e={};T.exports=e;var l=v(4),a=v(0),r=v(6),h=v(1),i=v(5),u=v(2),o=v(14);(function(){var t,s;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(f){window.setTimeout(function(){f(a.now())},1e3/60)},s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(f){var p={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!f.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=a.extend(p,f);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=f.mouse,m.engine=f.engine,m.canvas=m.canvas||d(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.controller=e,m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),a.isElement(m.element)&&m.element.appendChild(m.canvas),m},e.run=function(f){(function p(m){f.frameRequestId=t(p),n(f,m),e.world(f,m),f.context.setTransform(f.options.pixelRatio,0,0,f.options.pixelRatio,0,0),(f.options.showStats||f.options.showDebug)&&e.stats(f,f.context,m),(f.options.showPerformance||f.options.showDebug)&&e.performance(f,f.context,m),f.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(f){s(f.frameRequestId)},e.setPixelRatio=function(f,p){var m=f.options,g=f.canvas;p==="auto"&&(p=y(g)),m.pixelRatio=p,g.setAttribute("data-pixel-ratio",p),g.width=m.width*p,g.height=m.height*p,g.style.width=m.width+"px",g.style.height=m.height+"px"},e.setSize=function(f,p,m){f.options.width=p,f.options.height=m,f.bounds.max.x=f.bounds.min.x+p,f.bounds.max.y=f.bounds.min.y+m,f.options.pixelRatio!==1?e.setPixelRatio(f,f.options.pixelRatio):(f.canvas.width=p,f.canvas.height=m)},e.lookAt=function(f,p,m,g){g=typeof g<"u"?g:!0,p=a.isArray(p)?p:[p],m=m||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<p.length;x+=1){var C=p[x],P=C.bounds?C.bounds.min:C.min||C.position||C,B=C.bounds?C.bounds.max:C.max||C.position||C;P&&B&&(P.x<S.min.x&&(S.min.x=P.x),B.x>S.max.x&&(S.max.x=B.x),P.y<S.min.y&&(S.min.y=P.y),B.y>S.max.y&&(S.max.y=B.y))}var E=S.max.x-S.min.x+2*m.x,L=S.max.y-S.min.y+2*m.y,D=f.canvas.height,R=f.canvas.width,k=R/D,F=E/L,W=1,z=1;F>k?z=F/k:W=k/F,f.options.hasBounds=!0,f.bounds.min.x=S.min.x,f.bounds.max.x=S.min.x+E*W,f.bounds.min.y=S.min.y,f.bounds.max.y=S.min.y+L*z,g&&(f.bounds.min.x+=E*.5-E*W*.5,f.bounds.max.x+=E*.5-E*W*.5,f.bounds.min.y+=L*.5-L*z*.5,f.bounds.max.y+=L*.5-L*z*.5),f.bounds.min.x-=m.x,f.bounds.max.x-=m.x,f.bounds.min.y-=m.y,f.bounds.max.y-=m.y,f.mouse&&(o.setScale(f.mouse,{x:(f.bounds.max.x-f.bounds.min.x)/f.canvas.width,y:(f.bounds.max.y-f.bounds.min.y)/f.canvas.height}),o.setOffset(f.mouse,f.bounds.min))},e.startViewTransform=function(f){var p=f.bounds.max.x-f.bounds.min.x,m=f.bounds.max.y-f.bounds.min.y,g=p/f.options.width,S=m/f.options.height;f.context.setTransform(f.options.pixelRatio/g,0,0,f.options.pixelRatio/S,0,0),f.context.translate(-f.bounds.min.x,-f.bounds.min.y)},e.endViewTransform=function(f){f.context.setTransform(f.options.pixelRatio,0,0,f.options.pixelRatio,0,0)},e.world=function(f,p){var m=a.now(),g=f.engine,S=g.world,x=f.canvas,C=f.context,P=f.options,B=f.timing,E=r.allBodies(S),L=r.allConstraints(S),D=P.wireframes?P.wireframeBackground:P.background,R=[],k=[],F,W={timestamp:g.timing.timestamp};if(i.trigger(f,"beforeRender",W),f.currentBackground!==D&&M(f,D),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,x.width,x.height),C.globalCompositeOperation="source-over",P.hasBounds){for(F=0;F<E.length;F++){var z=E[F];h.overlaps(z.bounds,f.bounds)&&R.push(z)}for(F=0;F<L.length;F++){var U=L[F],G=U.bodyA,b=U.bodyB,Q=U.pointA,H=U.pointB;G&&(Q=u.add(G.position,U.pointA)),b&&(H=u.add(b.position,U.pointB)),!(!Q||!H)&&(h.contains(f.bounds,Q)||h.contains(f.bounds,H))&&k.push(U)}e.startViewTransform(f),f.mouse&&(o.setScale(f.mouse,{x:(f.bounds.max.x-f.bounds.min.x)/f.options.width,y:(f.bounds.max.y-f.bounds.min.y)/f.options.height}),o.setOffset(f.mouse,f.bounds.min))}else k=L,R=E,f.options.pixelRatio!==1&&f.context.setTransform(f.options.pixelRatio,0,0,f.options.pixelRatio,0,0);!P.wireframes||g.enableSleeping&&P.showSleeping?e.bodies(f,R,C):(P.showConvexHulls&&e.bodyConvexHulls(f,R,C),e.bodyWireframes(f,R,C)),P.showBounds&&e.bodyBounds(f,R,C),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(f,R,C),P.showPositions&&e.bodyPositions(f,R,C),P.showVelocity&&e.bodyVelocity(f,R,C),P.showIds&&e.bodyIds(f,R,C),P.showSeparations&&e.separations(f,g.pairs.list,C),P.showCollisions&&e.collisions(f,g.pairs.list,C),P.showVertexNumbers&&e.vertexNumbers(f,R,C),P.showMousePosition&&e.mousePosition(f,f.mouse,C),e.constraints(k,C),P.hasBounds&&e.endViewTransform(f),i.trigger(f,"afterRender",W),B.lastElapsed=a.now()-m},e.stats=function(f,p,m){for(var g=f.engine,S=g.world,x=r.allBodies(S),C=0,P=55,B=44,E=0,L=0,D=0;D<x.length;D+=1)C+=x[D].parts.length;var R={Part:C,Body:x.length,Cons:r.allConstraints(S).length,Comp:r.allComposites(S).length,Pair:g.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(E,L,P*5.5,B),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var k in R){var F=R[k];p.fillStyle="#aaa",p.fillText(k,E+P,L+8),p.fillStyle="#eee",p.fillText(F,E+P,L+26),E+=P}},e.performance=function(f,p){var m=f.engine,g=f.timing,S=g.deltaHistory,x=g.elapsedHistory,C=g.timestampElapsedHistory,P=g.engineDeltaHistory,B=g.engineUpdatesHistory,E=g.engineElapsedHistory,L=m.timing.lastUpdatesPerFrame,D=m.timing.lastDelta,R=c(S),k=c(x),F=c(P),W=c(B),z=c(E),U=c(C),G=U/R||0,b=Math.round(R/D),Q=1e3/R||0,H=4,Y=12,N=60,j=34,Z=10,$=69;p.fillStyle="#0e0f19",p.fillRect(0,50,Y*5+N*6+22,j),e.status(p,Z,$,N,H,S.length,Math.round(Q)+" fps",Q/e._goodFps,function(X){return S[X]/R-1}),e.status(p,Z+Y+N,$,N,H,P.length,D.toFixed(2)+" dt",e._goodDelta/D,function(X){return P[X]/F-1}),e.status(p,Z+(Y+N)*2,$,N,H,B.length,L+" upf",Math.pow(a.clamp(W/b||1,0,1),4),function(X){return B[X]/W-1}),e.status(p,Z+(Y+N)*3,$,N,H,E.length,z.toFixed(2)+" ut",1-L*z/e._goodFps,function(X){return E[X]/z-1}),e.status(p,Z+(Y+N)*4,$,N,H,x.length,k.toFixed(2)+" rt",1-k/e._goodFps,function(X){return x[X]/k-1}),e.status(p,Z+(Y+N)*5,$,N,H,C.length,G.toFixed(2)+" x",G*G*G,function(X){return(C[X]/S[X]/G||0)-1})},e.status=function(f,p,m,g,S,x,C,P,B){f.strokeStyle="#888",f.fillStyle="#444",f.lineWidth=1,f.fillRect(p,m+7,g,1),f.beginPath(),f.moveTo(p,m+7-S*a.clamp(.4*B(0),-2,2));for(var E=0;E<g;E+=1)f.lineTo(p+E,m+7-(E<x?S*a.clamp(.4*B(E),-2,2):0));f.stroke(),f.fillStyle="hsl("+a.clamp(25+95*P,0,120)+",100%,60%)",f.fillRect(p,m-7,4,4),f.font="12px Arial",f.textBaseline="middle",f.textAlign="right",f.fillStyle="#eee",f.fillText(C,p+g,m-5)},e.constraints=function(f,p){for(var m=p,g=0;g<f.length;g++){var S=f[g];if(!(!S.render.visible||!S.pointA||!S.pointB)){var x=S.bodyA,C=S.bodyB,P,B;if(x?P=u.add(x.position,S.pointA):P=S.pointA,S.render.type==="pin")m.beginPath(),m.arc(P.x,P.y,3,0,2*Math.PI),m.closePath();else{if(C?B=u.add(C.position,S.pointB):B=S.pointB,m.beginPath(),m.moveTo(P.x,P.y),S.render.type==="spring")for(var E=u.sub(B,P),L=u.perp(u.normalise(E)),D=Math.ceil(a.clamp(S.length/5,12,20)),R,k=1;k<D;k+=1)R=k%2===0?1:-1,m.lineTo(P.x+E.x*(k/D)+L.x*R*4,P.y+E.y*(k/D)+L.y*R*4);m.lineTo(B.x,B.y)}S.render.lineWidth&&(m.lineWidth=S.render.lineWidth,m.strokeStyle=S.render.strokeStyle,m.stroke()),S.render.anchors&&(m.fillStyle=S.render.strokeStyle,m.beginPath(),m.arc(P.x,P.y,3,0,2*Math.PI),m.arc(B.x,B.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(f,p,m){var g=m;f.engine;var S=f.options,x=S.showInternalEdges||!S.wireframes,C,P,B,E;for(B=0;B<p.length;B++)if(C=p[B],!!C.render.visible){for(E=C.parts.length>1?1:0;E<C.parts.length;E++)if(P=C.parts[E],!!P.render.visible){if(S.showSleeping&&C.isSleeping?g.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(g.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!S.wireframes){var L=P.render.sprite,D=w(f,L.texture);g.translate(P.position.x,P.position.y),g.rotate(P.angle),g.drawImage(D,D.width*-L.xOffset*L.xScale,D.height*-L.yOffset*L.yScale,D.width*L.xScale,D.height*L.yScale),g.rotate(-P.angle),g.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)g.beginPath(),g.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{g.beginPath(),g.moveTo(P.vertices[0].x,P.vertices[0].y);for(var R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||x?g.lineTo(P.vertices[R].x,P.vertices[R].y):g.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!x&&g.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);g.lineTo(P.vertices[0].x,P.vertices[0].y),g.closePath()}S.wireframes?(g.lineWidth=1,g.strokeStyle=f.options.wireframeStrokeStyle,g.stroke()):(g.fillStyle=P.render.fillStyle,P.render.lineWidth&&(g.lineWidth=P.render.lineWidth,g.strokeStyle=P.render.strokeStyle,g.stroke()),g.fill())}g.globalAlpha=1}}},e.bodyWireframes=function(f,p,m){var g=m,S=f.options.showInternalEdges,x,C,P,B,E;for(g.beginPath(),P=0;P<p.length;P++)if(x=p[P],!!x.render.visible)for(E=x.parts.length>1?1:0;E<x.parts.length;E++){for(C=x.parts[E],g.moveTo(C.vertices[0].x,C.vertices[0].y),B=1;B<C.vertices.length;B++)!C.vertices[B-1].isInternal||S?g.lineTo(C.vertices[B].x,C.vertices[B].y):g.moveTo(C.vertices[B].x,C.vertices[B].y),C.vertices[B].isInternal&&!S&&g.moveTo(C.vertices[(B+1)%C.vertices.length].x,C.vertices[(B+1)%C.vertices.length].y);g.lineTo(C.vertices[0].x,C.vertices[0].y)}g.lineWidth=1,g.strokeStyle=f.options.wireframeStrokeStyle,g.stroke()},e.bodyConvexHulls=function(f,p,m){var g=m,S,x,C;for(g.beginPath(),x=0;x<p.length;x++)if(S=p[x],!(!S.render.visible||S.parts.length===1)){for(g.moveTo(S.vertices[0].x,S.vertices[0].y),C=1;C<S.vertices.length;C++)g.lineTo(S.vertices[C].x,S.vertices[C].y);g.lineTo(S.vertices[0].x,S.vertices[0].y)}g.lineWidth=1,g.strokeStyle="rgba(255,255,255,0.2)",g.stroke()},e.vertexNumbers=function(f,p,m){var g=m,S,x,C;for(S=0;S<p.length;S++){var P=p[S].parts;for(C=P.length>1?1:0;C<P.length;C++){var B=P[C];for(x=0;x<B.vertices.length;x++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(S+"_"+x,B.position.x+(B.vertices[x].x-B.position.x)*.8,B.position.y+(B.vertices[x].y-B.position.y)*.8)}}},e.mousePosition=function(f,p,m){var g=m;g.fillStyle="rgba(255,255,255,0.8)",g.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(f,p,m){var g=m;f.engine;var S=f.options;g.beginPath();for(var x=0;x<p.length;x++){var C=p[x];if(C.render.visible)for(var P=p[x].parts,B=P.length>1?1:0;B<P.length;B++){var E=P[B];g.rect(E.bounds.min.x,E.bounds.min.y,E.bounds.max.x-E.bounds.min.x,E.bounds.max.y-E.bounds.min.y)}}S.wireframes?g.strokeStyle="rgba(255,255,255,0.08)":g.strokeStyle="rgba(0,0,0,0.1)",g.lineWidth=1,g.stroke()},e.bodyAxes=function(f,p,m){var g=m;f.engine;var S=f.options,x,C,P,B;for(g.beginPath(),C=0;C<p.length;C++){var E=p[C],L=E.parts;if(E.render.visible)if(S.showAxes)for(P=L.length>1?1:0;P<L.length;P++)for(x=L[P],B=0;B<x.axes.length;B++){var D=x.axes[B];g.moveTo(x.position.x,x.position.y),g.lineTo(x.position.x+D.x*20,x.position.y+D.y*20)}else for(P=L.length>1?1:0;P<L.length;P++)for(x=L[P],B=0;B<x.axes.length;B++)g.moveTo(x.position.x,x.position.y),g.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}S.wireframes?(g.strokeStyle="indianred",g.lineWidth=1):(g.strokeStyle="rgba(255, 255, 255, 0.4)",g.globalCompositeOperation="overlay",g.lineWidth=2),g.stroke(),g.globalCompositeOperation="source-over"},e.bodyPositions=function(f,p,m){var g=m;f.engine;var S=f.options,x,C,P,B;for(g.beginPath(),P=0;P<p.length;P++)if(x=p[P],!!x.render.visible)for(B=0;B<x.parts.length;B++)C=x.parts[B],g.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),g.closePath();for(S.wireframes?g.fillStyle="indianred":g.fillStyle="rgba(0,0,0,0.5)",g.fill(),g.beginPath(),P=0;P<p.length;P++)x=p[P],x.render.visible&&(g.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),g.closePath());g.fillStyle="rgba(255,165,0,0.8)",g.fill()},e.bodyVelocity=function(f,p,m){var g=m;g.beginPath();for(var S=0;S<p.length;S++){var x=p[S];if(x.render.visible){var C=l.getVelocity(x);g.moveTo(x.position.x,x.position.y),g.lineTo(x.position.x+C.x,x.position.y+C.y)}}g.lineWidth=3,g.strokeStyle="cornflowerblue",g.stroke()},e.bodyIds=function(f,p,m){var g=m,S,x;for(S=0;S<p.length;S++)if(p[S].render.visible){var C=p[S].parts;for(x=C.length>1?1:0;x<C.length;x++){var P=C[x];g.font="12px Arial",g.fillStyle="rgba(255,255,255,0.5)",g.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(f,p,m){var g=m,S=f.options,x,C,P,B;for(g.beginPath(),P=0;P<p.length;P++)if(x=p[P],!!x.isActive)for(C=x.collision,B=0;B<x.contactCount;B++){var E=x.contacts[B],L=E.vertex;g.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(S.wireframes?g.fillStyle="rgba(255,255,255,0.7)":g.fillStyle="orange",g.fill(),g.beginPath(),P=0;P<p.length;P++)if(x=p[P],!!x.isActive&&(C=x.collision,x.contactCount>0)){var D=x.contacts[0].vertex.x,R=x.contacts[0].vertex.y;x.contactCount===2&&(D=(x.contacts[0].vertex.x+x.contacts[1].vertex.x)/2,R=(x.contacts[0].vertex.y+x.contacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?g.moveTo(D-C.normal.x*8,R-C.normal.y*8):g.moveTo(D+C.normal.x*8,R+C.normal.y*8),g.lineTo(D,R)}S.wireframes?g.strokeStyle="rgba(255,165,0,0.7)":g.strokeStyle="orange",g.lineWidth=1,g.stroke()},e.separations=function(f,p,m){var g=m,S=f.options,x,C,P,B,E;for(g.beginPath(),E=0;E<p.length;E++)if(x=p[E],!!x.isActive){C=x.collision,P=C.bodyA,B=C.bodyB;var L=1;!B.isStatic&&!P.isStatic&&(L=.5),B.isStatic&&(L=0),g.moveTo(B.position.x,B.position.y),g.lineTo(B.position.x-C.penetration.x*L,B.position.y-C.penetration.y*L),L=1,!B.isStatic&&!P.isStatic&&(L=.5),P.isStatic&&(L=0),g.moveTo(P.position.x,P.position.y),g.lineTo(P.position.x+C.penetration.x*L,P.position.y+C.penetration.y*L)}S.wireframes?g.strokeStyle="rgba(255,165,0,0.5)":g.strokeStyle="orange",g.stroke()},e.inspector=function(f,p){f.engine;var m=f.selected,g=f.render,S=g.options,x;if(S.hasBounds){var C=g.bounds.max.x-g.bounds.min.x,P=g.bounds.max.y-g.bounds.min.y,B=C/g.options.width,E=P/g.options.height;p.scale(1/B,1/E),p.translate(-g.bounds.min.x,-g.bounds.min.y)}for(var L=0;L<m.length;L++){var D=m[L].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),D.type){case"body":x=D.bounds,p.beginPath(),p.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var R=D.pointA;D.bodyA&&(R=D.pointB),p.beginPath(),p.arc(R.x,R.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}f.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",x=f.selectBounds,p.beginPath(),p.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),S.hasBounds&&p.setTransform(1,0,0,1,0,0)};var n=function(f,p){var m=f.engine,g=f.timing,S=g.historySize,x=m.timing.timestamp;g.delta=p-g.lastTime||e._goodDelta,g.lastTime=p,g.timestampElapsed=x-g.lastTimestamp||0,g.lastTimestamp=x,g.deltaHistory.unshift(g.delta),g.deltaHistory.length=Math.min(g.deltaHistory.length,S),g.engineDeltaHistory.unshift(m.timing.lastDelta),g.engineDeltaHistory.length=Math.min(g.engineDeltaHistory.length,S),g.timestampElapsedHistory.unshift(g.timestampElapsed),g.timestampElapsedHistory.length=Math.min(g.timestampElapsedHistory.length,S),g.engineUpdatesHistory.unshift(m.timing.lastUpdatesPerFrame),g.engineUpdatesHistory.length=Math.min(g.engineUpdatesHistory.length,S),g.engineElapsedHistory.unshift(m.timing.lastElapsed),g.engineElapsedHistory.length=Math.min(g.engineElapsedHistory.length,S),g.elapsedHistory.unshift(g.lastElapsed),g.elapsedHistory.length=Math.min(g.elapsedHistory.length,S)},c=function(f){for(var p=0,m=0;m<f.length;m+=1)p+=f[m];return p/f.length||0},d=function(f,p){var m=document.createElement("canvas");return m.width=f,m.height=p,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},y=function(f){var p=f.getContext("2d"),m=window.devicePixelRatio||1,g=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/g},w=function(f,p){var m=f.textures[p];return m||(m=f.textures[p]=new Image,m.src=p,m)},M=function(f,p){var m=p;/(jpg|gif|png)$/.test(p)&&(m="url("+p+")"),f.canvas.style.background=m,f.canvas.style.backgroundSize="contain",f.currentBackground=p}})()},function(T,I,v){var e={};T.exports=e;var l=v(5),a=v(17),r=v(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(i){var u={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},o=r.extend(u,i);return o.fps=0,o},e.run=function(i,u){return i.timeBuffer=e._frameDeltaFallback,function o(t){i.frameRequestId=e._onNextFrame(i,o),t&&i.enabled&&e.tick(i,u,t)}(),i},e.tick=function(i,u,o){var t=r.now(),s=i.delta,n=0,c=o-i.timeLastTick;if((!c||!i.timeLastTick||c>Math.max(e._maxFrameDelta,i.maxFrameTime))&&(c=i.frameDelta||e._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(c),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var d=i.frameDeltaHistory.slice(0).sort(),y=i.frameDeltaHistory.slice(d.length*e._smoothingLowerBound,d.length*e._smoothingUpperBound),w=h(y);c=w||c}i.frameDeltaSnapping&&(c=1e3/Math.round(1e3/c)),i.frameDelta=c,i.timeLastTick=o,i.timeBuffer+=i.frameDelta,i.timeBuffer=r.clamp(i.timeBuffer,0,i.frameDelta+s*e._timeBufferMargin),i.lastUpdatesDeferred=0;var M=i.maxUpdates||Math.ceil(i.maxFrameTime/s),f={timestamp:u.timing.timestamp};l.trigger(i,"beforeTick",f),l.trigger(i,"tick",f);for(var p=r.now();s>0&&i.timeBuffer>=s*e._timeBufferMargin;){l.trigger(i,"beforeUpdate",f),a.update(u,s),l.trigger(i,"afterUpdate",f),i.timeBuffer-=s,n+=1;var m=r.now()-t,g=r.now()-p,S=m+e._elapsedNextEstimate*g/n;if(n>=M||S>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/s-e._timeBufferMargin));break}}u.timing.lastUpdatesPerFrame=n,l.trigger(i,"afterTick",f),i.frameDeltaHistory.length>=100&&(i.lastUpdatesDeferred&&Math.round(i.frameDelta/s)>M?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):i.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof i.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(i.deltaMin||i.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),i.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(i){e._cancelNextFrame(i)},e._onNextFrame=function(i,u){if(typeof window<"u"&&window.requestAnimationFrame)i.frameRequestId=window.requestAnimationFrame(u);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return i.frameRequestId},e._cancelNextFrame=function(i){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(i.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(i){for(var u=0,o=i.length,t=0;t<o;t+=1)u+=i[t];return u/o||0}})()},function(T,I,v){var e={};T.exports=e;var l=v(8),a=v(0),r=a.deprecated;(function(){e.collides=function(h,i){return l.collides(h,i)},r(e,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(T,I,v){var e={};T.exports=e,v(1);var l=v(0);(function(){e.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,i,u,o,t,s,n,c,d,y,w=[],M,f,p=0,m=0,g=0;r=r||15;var S=function(C,P,B){var E=B%2===1&&B>1;if(!d||C!=d.x||P!=d.y){d&&E?(M=d.x,f=d.y):(M=0,f=0);var L={x:M+C,y:f+P};(E||!d)&&(d=L),w.push(L),m=M+C,g=f+P}},x=function(C){var P=C.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":m=C.x,g=C.y;break;case"H":m=C.x;break;case"V":g=C.y;break}S(m,g,C.pathSegType)}};for(e._svgPathToAbsolute(a),u=a.getTotalLength(),s=[],h=0;h<a.pathSegList.numberOfItems;h+=1)s.push(a.pathSegList.getItem(h));for(n=s.concat();p<u;){if(y=a.getPathSegAtLength(p),t=s[y],t!=c){for(;n.length&&n[0]!=t;)x(n.shift());c=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=a.getPointAtLength(p),S(o.x,o.y,0);break}p+=r}for(h=0,i=n.length;h<i;++h)x(n[h]);return w},e._svgPathToAbsolute=function(a){for(var r,h,i,u,o,t,s=a.pathSegList,n=0,c=0,d=s.numberOfItems,y=0;y<d;++y){var w=s.getItem(y),M=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(M))"x"in w&&(n=w.x),"y"in w&&(c=w.y);else switch("x1"in w&&(i=n+w.x1),"x2"in w&&(o=n+w.x2),"y1"in w&&(u=c+w.y1),"y2"in w&&(t=c+w.y2),"x"in w&&(n+=w.x),"y"in w&&(c+=w.y),M){case"m":s.replaceItem(a.createSVGPathSegMovetoAbs(n,c),y);break;case"l":s.replaceItem(a.createSVGPathSegLinetoAbs(n,c),y);break;case"h":s.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(n),y);break;case"v":s.replaceItem(a.createSVGPathSegLinetoVerticalAbs(c),y);break;case"c":s.replaceItem(a.createSVGPathSegCurvetoCubicAbs(n,c,i,u,o,t),y);break;case"s":s.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(n,c,o,t),y);break;case"q":s.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(n,c,i,u),y);break;case"t":s.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(n,c),y);break;case"a":s.replaceItem(a.createSVGPathSegArcAbs(n,c,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),y);break;case"z":case"Z":n=r,c=h;break}(M=="M"||M=="m")&&(r=n,h=c)}}})()},function(T,I,v){var e={};T.exports=e;var l=v(6);v(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(me);var V=me.exports;const Le={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};document.addEventListener("DOMContentLoaded",()=>{ne.registerPlugin(se);const O=new Ee;O.on("scroll",se.update),ne.ticker.add(h=>{O.raf(h*1e3)}),ne.ticker.lagSmoothing(0);const A={gravity:{x:0,y:1},restitution:.5,friction:.15,frictionAir:.02,density:.02,wallThickness:200,mouseStiffness:.6};let T,I,v,e=[],l=null;function a(h,i,u){return Math.max(i,Math.min(u,h))}function r(h){T=V.Engine.create(),T.gravity=A.gravity,T.constraintIterations=10,T.positionIterations=20,T.velocityIterations=16,T.timing.timeScale=1;const i=h.getBoundingClientRect(),u=A.wallThickness,o=Ie(i),t=h.querySelector(".center-drop-zone");t&&t.classList.add("show");const s=[V.Bodies.rectangle(i.width/2,i.height+u/2,i.width+u*2,u,{isStatic:!0}),V.Bodies.rectangle(-u/2,i.height/2,u,i.height+u*2,{isStatic:!0}),V.Bodies.rectangle(i.width+u/2,i.height/2,u,i.height+u*2,{isStatic:!0})];V.World.add(T.world,s),h.querySelectorAll(".object").forEach((f,p)=>{const m=f.getBoundingClientRect(),g=Math.random()*(i.width-m.width)+m.width/2,S=-500-p*200,x=0,C=V.Bodies.rectangle(g,S,m.width,m.height,{restitution:A.restitution,friction:A.friction,frictionAir:A.frictionAir,density:A.density});V.Body.setAngle(C,x),e.push({body:C,element:f,width:m.width,height:m.height}),V.World.add(T.world,C)}),h.querySelectorAll(".small-object").forEach((f,p)=>{const m=f.getBoundingClientRect(),g=Math.random()*(i.width-m.width)+m.width/2,S=-500-p*200,x=(Math.random()-.5)*Math.PI,C=V.Bodies.rectangle(g,S,m.width,m.height,{restitution:A.restitution,friction:A.friction,frictionAir:A.frictionAir,density:A.density});V.Body.setAngle(C,x),e.push({body:C,element:f,width:m.width,height:m.height}),V.World.add(T.world,C)}),setTimeout(()=>{l=V.Bodies.rectangle(i.width/2,-u/2,i.width+u*2,u,{isStatic:!0}),V.World.add(T.world,l)},3e3);const d=V.Mouse.create(h);d.element.removeEventListener("mousewheel",d.mousewheel),d.element.removeEventListener("DOMMouseScroll",d.mousewheel),v=V.MouseConstraint.create(T,{mouse:d,constraint:{stiffness:A.mouseStiffness,render:{visible:!1}}}),v.mouse.element.oncontextmenu=()=>!1;let y=null,w=null;V.Events.on(v,"startdrag",function(f){y=f.body,y&&(w=y.inertia,V.Body.setInertia(y,1/0),V.Body.setVelocity(y,{x:0,y:0}),V.Body.setAngularVelocity(y,0))}),V.Events.on(v,"enddrag",function(f){if(!y)return;const p=y,m=e.find(g=>g.body===p);V.Body.setInertia(p,w||1),y=null,w=null,m&&Re(p,o)&&(V.Body.setStatic(p,!0),De(m.element,p))}),V.Events.on(T,"beforeUpdate",function(){if(y){const f=e.find(p=>p.body===y);if(f){const p=f.width/2,m=i.width-f.width/2,g=f.height/2,S=i.height-f.height/2;V.Body.setPosition(y,{x:a(y.position.x,p,m),y:a(y.position.y,g,S)}),V.Body.setVelocity(y,{x:a(y.velocity.x,-20,20),y:a(y.velocity.y,-20,20)})}}}),h.addEventListener("mouseleave",()=>{v.constraint.bodyB=null,v.constraint.pointB=null}),document.addEventListener("mouseup",()=>{v.constraint.bodyB=null,v.constraint.pointB=null}),V.World.add(T.world,v),I=V.Runner.create(),V.Runner.run(I,T);function M(){e.forEach(({body:f,element:p,width:m,height:g})=>{const S=a(f.position.x-m/2,0,i.width-m),x=a(f.position.y-g/2,-g*3,i.height-g);p.style.left=S+"px",p.style.top=x+"px",p.style.transform=`rotate(${f.angle}rad)`}),requestAnimationFrame(M)}M()}document.querySelectorAll("section").forEach(h=>{h.querySelector(".object-container")&&se.create({trigger:h,start:"top bottom",once:!0,onEnter:()=>{const i=h.querySelector(".object-container");i&&!T&&r(i)}})})});function Ie(O){return{x1:O.width*.3,x2:O.width*.7,y1:O.height*.3,y2:O.height*.7}}function Re(O,A){const{x:T,y:I}=O.position;return T>=A.x1&&T<=A.x2&&I>=A.y1&&I<=A.y2}function oe(O){var T;const A=import.meta&&Le&&"/"||((T=document.querySelector("base"))==null?void 0:T.getAttribute("href"))||"/";return new URL(O.replace(/^\/+/,""),new URL(A,window.location.origin)).toString()}function De(O,A){const T=document.getElementById("card-popup"),I=T.querySelector(".popup-backdrop"),v=T.querySelector(".popup-text"),e=T.querySelector("#popup-img");e.classList.remove("shift-left","shift-right","shift"),T.classList.remove("hidden"),T.setAttribute("aria-hidden","false"),O.innerText.includes("Chia")?(e.src=oe("img/team1.png"),v.innerHTML="Chia sẻ kiến thức thiết kế cho nội bộ thư viện",e.classList.add("shift")):O.innerText.includes("Phối")?(e.src=oe("img/team17.png"),v.innerHTML="Phối hợp với các ban khác tổ chức workshop mở rộng cho thư viện/cộng đồng",e.classList.add("shift-right")):(e.src=oe("img/team20.png"),v.innerHTML="Tổ chức workshop về thiết kế như: <br> workshop làm tranh mosaic, <br> workshop in tranh rập, <br> workshop Giáng sinh",e.classList.add("shift-left"));const l=()=>{T.classList.add("hidden"),T.setAttribute("aria-hidden","true"),document.removeEventListener("keydown",a),I.removeEventListener("click",r),A&&(V.Body.setStatic(A,!1),V.Body.setVelocity(A,{x:0,y:0}),V.Body.setAngularVelocity(A,0))},a=h=>h.key==="Escape"?l():null,r=h=>{h.target===I&&l()};document.addEventListener("keydown",a),I.addEventListener("click",r)}
